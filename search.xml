<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>简单车辆模型-垂直动力学2</title>
    <url>/Modeling%20and%20simulation%20in%20vehicle%20technology-Eigenfrequenz/</url>
    <content><![CDATA[<h2 id="垂直动力学">0. 垂直动力学</h2>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214165941.png" style="zoom:80%;" /></p>
<p>车辆开发的目标之一为优化驾驶舒适性。实现驾驶舒适性通过:</p>
<ul>
<li>防止振动从车道传递到车辆乘员。</li>
<li>车道与车体的分离。</li>
<li>驾驶舒适性与行驶安全要求冲突。</li>
<li>通过积极和创新的概念改善舒适度和安全性。</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213202008.png"  style="zoom: 67%;" /></p>
<p>使用惰性气体的被动车辆悬架具有性能优势, 既改善驾驶舒适性又提高驾驶安全性。这里引入了一种新的理想的网络元件，称为惯性器(Inerter)，并被证明是可行的，其特性是施加的力与元件两端的相对加速度成比例。<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> <span class="math display">\[
F=k\cdot\ddot{x}
\]</span> 飞轮由高传动比的变速箱驱动:</p>
<ul>
<li>较小的相对运动导致较大的旋转角度</li>
<li>对加速度具有惰性</li>
</ul>
<p>下图展示了传统的四分之一车辆模型与添加了惯性器的四分之一车辆模型</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213215112.png" title='传统模型与添加惯性器之后' style="zoom:67%;" /></p>
<h2 id="运动方程及参数">1. 运动方程及参数</h2>
<p>整个系统的运动方程如下: <span class="math display">\[
\underline{\underline{M}} \cdot \ddot{\underline{z}}+\underline{\underline{D}} \cdot \dot{\underline{z}}+\underline{\underline{C}} \cdot \underline{z}=\underline{F}\tag{1}
\]</span> 传统的四分之一车辆模型的参数: <span class="math display">\[
\begin{align}
\underline{z}&amp;=\left[\begin{array}{c}z_{3} \\ z_{2}\\ z_{1}\end{array}\right]\\
\underline{M}&amp;=\left[\begin{array}{cccc}m_{3} &amp; 0 &amp; 0 \\ 0 &amp; m_{2} &amp; 0  \\ 0 &amp; 0 &amp; m_1\end{array}\right] \\ \underline{\underline{D}}&amp;=\left[\begin{array}{cccc}d_{3} &amp; -d_3 &amp; 0 \\ -d_{3} &amp; d_{3}+d_2 &amp; -d_2  \\ 0 &amp; -d_2 &amp; d_2  \\\end{array}\right] \\ 
\underline{C}&amp;=\left[\begin{array}{cccc}c_{3} &amp; -c_3 &amp; 0 \\ -c_{3} &amp; c_{3}+c_2 &amp; -c_2  \\ 0 &amp; -c_2 &amp; c_2+c_1  \\\end{array}\right]\\
\underline{F}&amp;=\left[\begin{array}{c}-m_{3} \cdot g \\ -m_{2} \cdot g \\ -m_{1} \cdot g + c_1\cdot u(t) \end{array}\right]
\end{align}
\]</span> 添加了惯性器的四分之一车辆模型: <span class="math display">\[
\begin{align}
\underline{z}&amp;=\left[\begin{array}{c}z_{3} \\ z_{2} \\ z_{d l} \\ z_{1}\end{array}\right]\\
\underline{M}&amp;=\left[\begin{array}{cccc}m_{3} &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; m_{2} &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; m_{d l}+k_{i 2} &amp; -k_{i 2} \\ 0 &amp; 0 &amp; -k_{i 2} &amp; m_{1}+k_{i 2}\end{array}\right] \\ \underline{\underline{D}}&amp;=\left[\begin{array}{cccc}d_{3} &amp; -d_3 &amp; -d_{3} &amp; 0 &amp; 0 \\ -d_{3} &amp; d_{3}+d_{B}+d_{d l} &amp; -d_{d l} &amp; -d_{B} \\ 0 &amp; -d_{d l} &amp; d_{d l} &amp; 0 \\ 0 &amp; -d_{B} &amp; 0 &amp; d_{B}\end{array}\right] \\ 
\underline{C}&amp;=\left[\begin{array}{cccc}c_{3} &amp; -c_{3} &amp; 0 &amp; 0 \\ -c_{3} &amp; c_{3}+c_{B}+c_{d l} &amp; -c_{d l} &amp; -c_{B} \\ 0 &amp; -c_{d l} &amp; c_{d l}+c_{2} &amp; -c_{2} \\ 0 &amp; -c_{B} &amp; -c_{2} &amp; c_{1}+c_{B}+c_{2}\end{array}\right]\\
\underline{F}&amp;=\left[\begin{array}{c}-m_{3} \cdot g \\ -m_{2} \cdot g \\ -m_{d l} \cdot g \\ -m_{1} \cdot g+c_{1} \cdot u(t)\end{array}\right]
\end{align}
\]</span> 其中道路激励如式所示 <span class="math display">\[
u(t) = u_0\cdot \cos(\omega\cdot t)\tag{2}
\]</span> 转换式(1): <span class="math display">\[
\ddot{\underline{z}} = -\underline{\underline{M}}^{-1}\,\underline{\underline{D}} \cdot \dot{\underline{z}}-\underline{\underline{M}}^{-1}\,\underline{\underline{C}} \cdot \underline{z}+\underline{\underline{M}}^{-1}\,\underline{F}
\]</span> 规定 <span class="math inline">\(\xi=\begin{bmatrix}{z}\\\dot{z}\end{bmatrix},\;\dot{\xi}=\begin{bmatrix}\dot{z}\\\ddot{z}\end{bmatrix}\)</span>， 因此可以得到: <span class="math display">\[
\dot{\xi}=\begin{bmatrix}0&amp;1\\-\underline{\underline{M}}^{-1}\,\underline{\underline{C}} &amp; -\underline{\underline{M}}^{-1}\,\underline{\underline{D}}\end{bmatrix}\xi+\begin{bmatrix}0\\\underline{\underline{M}}^{-1}\,\underline{F}\end{bmatrix}\tag{3}
\]</span> 这个微分方程的解可以为如下形式: <span class="math display">\[
\underline{x}_{i}(t)=\operatorname{Re}\left(\underline{v}_{i} \cdot e^{a_{i} t} \cdot\left(\cos \left(\omega_{i} t\right)+j \cdot \sin \left(\omega_{i} t\right)\right)\right)=\operatorname{Re}\left(\underline{v}_{i} \cdot e^{\lambda_{i} t}\right)
\]</span></p>
<ul>
<li><p><strong>特征值</strong> <span class="math inline">\(\lambda_{i}=a+j \omega \in \mathbb{C}\)</span></p>
<ul>
<li><p>特征值<strong>实部</strong> <i>Re(λ<sub>i</sub>)</i> 确定了系统的稳定性 (Stabilität)</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213233658.png" style="zoom:67%;" /></p></li>
<li><p>特征值<strong>虚部</strong> <i>Imag(λ<sub>i</sub>)</i> 确定了系统的固有频率 <span class="math display">\[
\operatorname{Imag}\left(\lambda_{i}\right)=\omega_{i}
\]</span> 固有频率 <i>f<sub>i</sub></i>: <span class="math display">\[
f_{i}=\frac{\omega_{i}}{2 \pi}
\]</span></p></li>
</ul></li>
<li><p><strong>特征向量</strong> <span class="math inline">\(\underline{v}_{i} \in \mathbb{C}\)</span></p>
<ul>
<li><span class="math inline">\(\underline{\mathrm{K}}_{i}=\left|\underline{v}_{i}\right|\)</span> 决定振幅大小</li>
<li><span class="math inline">\(\underline{\varphi}_{i}=\arg \left(\underline{v}_{i}\right)\)</span> 决定相移</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213234507.png" style="zoom:80%;" /></p></li>
</ul>
<h2 id="任务-skript">2. 任务 &amp; Skript</h2>
<p><strong>给定参数</strong> <span class="math display">\[
\begin{array}{llll}m_{1}=50 \mathrm{~kg} &amp; c_{1}=245 \frac{N}{m m} &amp; c_{d l, I}=10 \frac{N}{m m} &amp; g=9.81 m / s^{2} \\ m_{2}=500 k g &amp; c_{2, I}=10 \frac{N}{m m} &amp; d_{2, k}=1650 \frac{N s}{m} &amp; u_{0}=1 m m \\ m_{3}=20 k g &amp; c_{2, k}=37,5 \frac{N}{m m} &amp; d_{B, I}=400 \frac{N s}{m} &amp; \\ m_{d l, I}=1 k g &amp; c_{3}=20 \frac{N}{m m} &amp; d_{d l, I}=1650 \frac{N s}{m} \\ k_{I}=380 k g &amp; c_{B, I}=32 \frac{N}{m m} &amp; d_{3}=500 \frac{N s}{m}\end{array}
\]</span></p>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 计算添加了惯性器的和传统的四分之一车辆模型的固有频率
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 系统参数</span></span><br><span class="line"><span class="keyword">global</span> m1 m2 m3 mdl c1 u0 A_I M_I g A_k M_k</span><br><span class="line">m1 = <span class="number">50</span>; <span class="comment">%kg</span></span><br><span class="line">m2 = <span class="number">500</span>; <span class="comment">%kg</span></span><br><span class="line">m3 = <span class="number">20</span>; <span class="comment">%kg</span></span><br><span class="line">c1 = <span class="number">245e3</span>; <span class="comment">%N/m</span></span><br><span class="line">c3 = <span class="number">20e3</span>; <span class="comment">%N/m</span></span><br><span class="line">d3 = <span class="number">500</span>; <span class="comment">%Ns/m</span></span><br><span class="line">g = <span class="number">9.81</span>; <span class="comment">%m/s^2</span></span><br><span class="line">u0 = <span class="number">1e-3</span>; <span class="comment">%m</span></span><br><span class="line"><span class="comment">% 带惯性器的系统参数</span></span><br><span class="line">mdl = <span class="number">1</span>; <span class="comment">%kg</span></span><br><span class="line">ki2 = <span class="number">380</span>; <span class="comment">%kg</span></span><br><span class="line">c2i = <span class="number">10e3</span>; <span class="comment">%N/m</span></span><br><span class="line">cB = <span class="number">32e3</span>; <span class="comment">%N/m</span></span><br><span class="line">cdl = <span class="number">10e3</span>; <span class="comment">%N/m</span></span><br><span class="line">dB = <span class="number">400</span>; <span class="comment">%Ns/m</span></span><br><span class="line">ddl = <span class="number">1650</span>; <span class="comment">%Ns/m</span></span><br><span class="line"><span class="comment">% 1. 传统系统</span></span><br><span class="line">c2k = <span class="number">37.5e3</span>; <span class="comment">%N/m</span></span><br><span class="line">d2k = <span class="number">1650</span>; <span class="comment">%Ns/m</span></span><br><span class="line"></span><br><span class="line">M_I = [m3 <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        <span class="number">0</span> m2 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        <span class="number">0</span> <span class="number">0</span> mdl+ki2 -ki2</span><br><span class="line">        <span class="number">0</span> <span class="number">0</span> -ki2 m1+ki2];</span><br><span class="line">D_I = [d3 -d3 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">       -d3 d3+dB+ddl -ddl -dB</span><br><span class="line">       <span class="number">0</span> -ddl ddl <span class="number">0</span></span><br><span class="line">       <span class="number">0</span> -dB <span class="number">0</span> dB];</span><br><span class="line">C_I = [c3 -c3 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">       -c3 c3+cB+cdl -cdl -cB</span><br><span class="line">       <span class="number">0</span> -cdl cdl+c2i -c2i</span><br><span class="line">       <span class="number">0</span> -cB -c2i cB+c2i+c1];</span><br><span class="line">A_I = [<span class="built_in">zeros</span>(<span class="number">4</span>),<span class="built_in">eye</span>(<span class="number">4</span>); -M_I\C_I, -M_I\D_I];</span><br><span class="line"><span class="comment">% 2. 添加惯性器的系统</span></span><br><span class="line">M_I = [m3 <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        <span class="number">0</span> m2 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">        <span class="number">0</span> <span class="number">0</span> mdl+ki2 -ki2</span><br><span class="line">        <span class="number">0</span> <span class="number">0</span> -ki2 m1+ki2];</span><br><span class="line">D_I = [d3 -d3 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">       -d3 d3+dB+ddl -ddl -dB</span><br><span class="line">       <span class="number">0</span> -ddl ddl <span class="number">0</span></span><br><span class="line">       <span class="number">0</span> -dB <span class="number">0</span> dB];</span><br><span class="line">C_I = [c3 -c3 <span class="number">0</span> <span class="number">0</span></span><br><span class="line">       -c3 c3+cB+cdl -cdl -cB</span><br><span class="line">       <span class="number">0</span> -cdl cdl+c2i -c2i</span><br><span class="line">       <span class="number">0</span> -cB -c2i cB+c2i+c1];</span><br><span class="line">A_I = [<span class="built_in">zeros</span>(<span class="number">4</span>),<span class="built_in">eye</span>(<span class="number">4</span>); -M_I\C_I, -M_I\D_I];</span><br><span class="line"></span><br><span class="line"><span class="comment">% 解式(3)，对两个系统分别求固有频率</span></span><br><span class="line">la_k = eig(A_k);</span><br><span class="line">w_eig_k = <span class="built_in">abs</span>(<span class="built_in">imag</span>(la_k));</span><br><span class="line">w_eig_k = unique(w_eig_k);</span><br><span class="line">w_eig_k = <span class="built_in">sort</span>(w_eig_k);</span><br><span class="line"></span><br><span class="line">la_I = eig(A_I);</span><br><span class="line">w_eig_I = <span class="built_in">abs</span>(<span class="built_in">imag</span>(la_I));</span><br><span class="line">w_eig_I = unique(w_eig_I);</span><br><span class="line">w_eig_I = <span class="built_in">sort</span>(w_eig_I);</span><br></pre></td></tr></table></figure>
<p style="background-color:Wheat">
<font size=4><b>任务2</b></font>: 通过车轮上最低点的激励以自然频率激励系统。比较座椅加速度的幅度（驾驶舒适性）和车轮负载波动的幅度（驾驶安全性），并评估结果(对比两个系统)。 计算应在间隔 t = [0 10]𝑠 中进行，并从静态静止位置开始。
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tspan = <span class="number">0</span>:<span class="number">1e-2</span>:<span class="number">10</span>;</span><br><span class="line"><span class="comment">%% 1. 模拟传统系统</span></span><br><span class="line">F0_k = [-m3; -m2; -m1]*g;</span><br><span class="line">z0_k = C_k\F0_k;</span><br><span class="line">xi0_k = [z0_k;<span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>)];</span><br><span class="line"><span class="comment">% ODE Setting</span></span><br><span class="line">odeopts = odeset();</span><br><span class="line"><span class="comment">% 调用计算函数（传统系统）</span></span><br><span class="line">[t1_k, xi1_k] = ode45(@ODE_2S,tspan,xi0_k,odeopts,w_eig_k(<span class="number">1</span>),<span class="string">&#x27;konventionell&#x27;</span>);</span><br><span class="line">[t2_k, xi2_k] = ode45(@ODE_2S,tspan,xi0_k,odeopts,w_eig_k(<span class="number">2</span>),<span class="string">&#x27;konventionell&#x27;</span>);</span><br><span class="line">[t3_k, xi3_k] = ode45(@ODE_2S,tspan,xi0_k,odeopts,w_eig_k(<span class="number">3</span>),<span class="string">&#x27;konventionell&#x27;</span>);</span><br><span class="line"><span class="comment">% 计算座椅上的加速度和车轮负载波动</span></span><br><span class="line"><span class="comment">% 思路是用diff函数计算差商 a = dxp/dt 来计算座椅加速度</span></span><br><span class="line">a1_k = diff(xi1_k(:,<span class="number">4</span>))./diff(t1_k);</span><br><span class="line">a2_k = diff(xi2_k(:,<span class="number">4</span>))./diff(t2_k);</span><br><span class="line">a3_k = diff(xi3_k(:,<span class="number">4</span>))./diff(t3_k);</span><br><span class="line"><span class="comment">% 加速过程的振幅</span></span><br><span class="line">Sitz_k(<span class="number">1</span>) = (<span class="built_in">max</span>(a1_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>))-<span class="built_in">min</span>(a1_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>)))/<span class="number">2</span>;</span><br><span class="line">Sitz_k(<span class="number">2</span>) = (<span class="built_in">max</span>(a2_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>))-<span class="built_in">min</span>(a2_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>)))/<span class="number">2</span>;</span><br><span class="line">Sitz_k(<span class="number">3</span>) = (<span class="built_in">max</span>(a3_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>))-<span class="built_in">min</span>(a3_k(<span class="built_in">round</span>(<span class="keyword">end</span>/<span class="number">2</span>):<span class="keyword">end</span>)))/<span class="number">2</span>;</span><br><span class="line"><span class="comment">% 计算车轮负载波动</span></span><br><span class="line">f1_k = c1*(xi1_k(:,<span class="number">3</span>)-u0*<span class="built_in">sin</span>(w_eig_k(<span class="number">1</span>)*t1_k));</span><br><span class="line">f2_k = c1*(xi2_k(:,<span class="number">3</span>)-u0*<span class="built_in">sin</span>(w_eig_k(<span class="number">2</span>)*t2_k));</span><br><span class="line">f3_k = c1*(xi3_k(:,<span class="number">3</span>)-u0*<span class="built_in">sin</span>(w_eig_k(<span class="number">3</span>)*t3_k));</span><br><span class="line"><span class="comment">%% 2. 添加惯性器的系统 (参照传统系统)</span></span><br><span class="line"><span class="comment">% 略</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[xip]</span> = <span class="title">ODE_2S</span><span class="params">(t,xi,w,System)</span></span></span><br><span class="line">	<span class="comment">% 导入全局变量</span></span><br><span class="line">	<span class="keyword">global</span> m1 m2 m3 mdl c1 u0 A_I M_I g A_k M_k</span><br><span class="line">	<span class="comment">% 选择系统</span></span><br><span class="line">	<span class="keyword">if</span> strcmp(System,<span class="string">&#x27;inerter&#x27;</span>)</span><br><span class="line">		<span class="comment">% 惰性系统的外力计算</span></span><br><span class="line">		F = [-m3*g; -m2*g; -mdl*g; -m1*g+c1*u0*<span class="built_in">sin</span>(w*t)];</span><br><span class="line">		<span class="comment">% 显式的ODE(矩阵表示法)</span></span><br><span class="line">		xip = A_I*xi+[<span class="built_in">zeros</span>(<span class="number">4</span>,<span class="number">1</span>);inv(M_I)*F];</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="comment">% 计算常规系统的外力</span></span><br><span class="line">		F = [-m3*g; -m2*g; -m1*g+c1*u0*<span class="built_in">sin</span>(w*t)];</span><br><span class="line">		<span class="comment">% 显式的ODE(矩阵表示法)</span></span><br><span class="line">		xip = A_k*xi+[<span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>);inv(M_k)*F];</span><br><span class="line">	<span class="keyword">end</span>	</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>结果展示:</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">figID = <span class="built_in">figure</span>(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">100</span> <span class="number">100</span> <span class="number">800</span> <span class="number">600</span>]);</span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(w_eig_I/<span class="number">2</span>/<span class="built_in">pi</span>,Sitz_I,<span class="string">&#x27;or&#x27;</span>)</span><br><span class="line"><span class="built_in">plot</span>(w_eig_k/<span class="number">2</span>/<span class="built_in">pi</span>,Sitz_k,<span class="string">&#x27;sb&#x27;</span>)</span><br><span class="line">grid on; box on;</span><br><span class="line">title(<span class="string">&#x27;激发固有频率时的座椅加速度振幅&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;激励频率 [Hz]&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;加速度 [m/s^2]&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(&#123;<span class="string">&#x27;添加惯性器系统&#x27;</span>,<span class="string">&#x27;传统系统&#x27;</span>&#125;,<span class="string">&#x27;Location&#x27;</span>,<span class="string">&#x27;southeast&#x27;</span>)</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">1.1</span>*<span class="built_in">max</span>(<span class="built_in">max</span>(Sitz_I),<span class="built_in">max</span>(Sitz_k))])</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(w_eig_I/<span class="number">2</span>/<span class="built_in">pi</span>,Kraft_I,<span class="string">&#x27;or&#x27;</span>)</span><br><span class="line"><span class="built_in">plot</span>(w_eig_k/<span class="number">2</span>/<span class="built_in">pi</span>,Kraft_k,<span class="string">&#x27;sb&#x27;</span>)</span><br><span class="line">grid on; box on;</span><br><span class="line">title(<span class="string">&#x27;激发固有频率时的车轮负载波动的幅度&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;激励频率 [Hz]&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;力 [N]&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(&#123;<span class="string">&#x27;添加惯性器系统&#x27;</span>,<span class="string">&#x27;传统系统&#x27;</span>&#125;,<span class="string">&#x27;Location&#x27;</span>,<span class="string">&#x27;southeast&#x27;</span>)</span><br><span class="line">ylim([<span class="number">0</span> <span class="number">1.1</span>*<span class="built_in">max</span>(<span class="built_in">max</span>(Kraft_I),<span class="built_in">max</span>(Kraft_k))])</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214171751.png" style="zoom:80%;" /></p>
<h2 id="参考文献">参考文献</h2>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>M. C. Smith and F.-C. Wang, “Performancebenefits in passive vehicle suspensions em-ploying inerters,”Vehicle system dynamics,vol. 42, no. 4, pp. 235–257, 2004.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>TU-Branschweig</category>
        <category>车辆技术中的建模与仿真</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
        <tag>车辆技术</tag>
        <tag>振动分析</tag>
        <tag>行驶动力学</tag>
      </tags>
  </entry>
  <entry>
    <title>信号分析</title>
    <url>/Modeling%20and%20simulation%20in%20vehicle%20technology-Signalanalyse/</url>
    <content><![CDATA[<h2 id="信号导入">0. 信号导入</h2>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128160721.png" style="zoom:50%;" /></p>
<h2 id="力信号的处理">1. 力信号的处理</h2>
<p>文件 <a href="https://github.com/Mr-Maohaha/Matlab/raw/main/Modellierung%20und%20Simulation%20in%20der%20Fahrzeugtechnik/Signalanalyse/data_UE10.txt">data_UE.txt</a> 记录了力信号与时间的关系。</p>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 将文件导入MATLAB 工作区
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">RAWDATA = importdata(<span class="string">&#x27;data_UE10.txt&#x27;</span>);</span><br><span class="line"><span class="comment">% 时间向量 (数据第一列)</span></span><br><span class="line">t = RAWDATA.data(:,<span class="number">1</span>); <span class="comment">% in s</span></span><br><span class="line"><span class="comment">% 力向量 (数据第二列)</span></span><br><span class="line">F = RAWDATA.data(:,<span class="number">2</span>); <span class="comment">% in N</span></span><br><span class="line"><span class="comment">% 采样速率 (从头文件阅读得知)</span></span><br><span class="line">Fs = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128163019.png" style="zoom: 45%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务2</b></font>: 用滤波器阶数为 5 (<i>n</i>=5) 且截止频率为 7 <i>Hz</i> (<i>f<sub>g</sub> = 7 Hz</i>) 的巴特沃斯低通滤波器对数据进行单向和双向滤波。创建并比较各自过滤后的时间信号和输出信号。
</p>
<hr />
<p><font size=4><b>低通滤波器</b></font>（英语：Low-pass filter）容许低频信号通过，但减弱（或减少）频率高于截止频率的信号的通过。对于不同滤波器而言，每个频率的信号的减弱程度不同。当使用在音频应用时，它有时被称为<b>高频剪切滤波器</b>，或<b>高音消除滤波器</b>。<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><em>n</em> 阶<strong>巴特沃斯低通滤波器</strong>的增益<i>G</i>(ω)为: <span class="math display">\[
G^{2}(\omega)=|H(j \omega)|^{2}=\frac{G_{0}^{2}}{1+\left(\frac{\omega}{\omega_{c}}\right)^{2 n}}\tag{1}
\]</span></p>
<table>
<thead>
<tr>
<th>
参数
</th>
<th>
含义
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<i>n</i>
</td>
<td>
滤波器的阶数
</td>
</tr>
<tr>
<td>
ω<sub>c</sub>
</td>
<td>
截止频率=功率下降为 -3分贝时的频率
</td>
</tr>
<tr>
<td>
<i>G</i><sub>0</sub>
</td>
<td>
直流增益（零频率增益）
</td>
</tr>
</tbody>
</table>
<p><b><u>0. 计算滤波器阶数</u></b> (Butterworth-Filter)</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128222223.png" style="zoom:55%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128222841.png" style="zoom: 60%;" /></p>
<p><b><u>1. 计算滤波器系数</u></b> (Butterworth-Filter)</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128215510.png" style="zoom: 55%;" /></p>
<ul>
<li><p>归一化截止频率 (Normierte Grenzfrequenz) ω<sub>n</sub>: <span class="math display">\[
\omega_{n}=\frac{f_{g}}{f_{b}}=\frac{f_{g}}{0,5 \cdot F_{s}}\tag{2}
\]</span></p>
<table>
<thead>
<tr>
<th>
<p>参数</p>
</th>
<th>
<p>含义</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<p><i>f</i><sub>g</sub></p>
</td>
<td>
<p>截止频率 (Grenzfrequenz)</p>
</td>
</tr>
<tr>
<td>
<p><i>f</i><sub>b</sub></p>
</td>
<td>
<p>信号带宽 (Signalbandbreite)</p>
</td>
</tr>
<tr>
<td>
<p><i>F</i><sub>s</sub></p>
</td>
<td>
<p>采样频率 (Abtastfrequenz)</p>
</td>
</tr>
</tbody>
</table></li>
<li><p>滤波器类型 (Filtertypen) ftype:</p>
<table>
<thead>
<tr>
<th>
<p>参数</p>
</th>
<th>
<p>含义</p>
</th>
<th>
<p>条件</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<p>'high'</p>
</td>
<td>
<p>高通 (Hochpass)</p>
</td>
<td>
<p>Wp &lt; Ws</p>
</td>
</tr>
<tr>
<td>
<p>'low'</p>
</td>
<td>
<p>低通 (Tiefpass)</p>
</td>
<td>
<p>Wp &gt; Ws</p>
</td>
</tr>
<tr>
<td>
<p>'stop'</p>
</td>
<td>
<p>带阻 (Bandsperre)</p>
</td>
<td>
<p>Ws(1) &lt; Wp(1) &lt; Wp(2) &lt; Ws(2)</p>
</td>
</tr>
<tr>
<td>
<p>'-'</p>
</td>
<td>
<p>带通 (Bandpass)</p>
</td>
<td>
<p>Wp(1) &lt; Ws(1) &lt; Ws(2) &lt; Wp(2)</p>
</td>
</tr>
</tbody>
</table>
<ul>
<li>W<sub>p</sub>: 归一化通带拐角频率 Normierte Durchlassfrequenz</li>
<li>W<sub>s</sub>: 归一化阻带起始频率 Normierte Sperrfrequenz</li>
</ul></li>
</ul>
<p><b><u>2. 展示滤波器</u></b></p>
<ul>
<li><p>生成幅度和相位响应的曲线图输出：</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131124553.png" style="zoom: 67%;" /></p></li>
<li><p>生成振幅和相位的复矢量 "h" 与频率 "tf" 对应曲线:</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128224123.png" style="zoom: 50%;" /></p></li>
</ul>
<p><font size=4><b>滤波</b></font>: 将数字滤波器应用于信号</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128224651.png" style="zoom: 55%;" /></p>
<p><b>双向滤波</b>先将输入序列按顺序滤波(forward filter)，然后将所得结果逆转后反向通过滤波器(reverse filter)，再将所得结果逆转后输出(reverse output)，即得精确零相位失真的输出序列。<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<hr />
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 创建滤波器</span></span><br><span class="line">ord =<span class="number">5</span>; <span class="comment">% 滤波器阶数 5</span></span><br><span class="line">Wn = <span class="number">7</span>/Fs;</span><br><span class="line">[b,a] = butter(ord, Wn,<span class="string">&#x27;low&#x27;</span>);</span><br><span class="line"><span class="comment">% 使用滤波器</span></span><br><span class="line"><span class="comment">% 单向滤波</span></span><br><span class="line">Fu = filter(b,a,F);</span><br><span class="line"><span class="comment">% 双向滤波</span></span><br><span class="line">Fb = filtfilt(b,a,F);</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128202532.png" style="zoom:60%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务3</b></font>: 对已滤波和未滤波的信号执行频率分析，并比较计算出的频谱。使用Hann窗口对数据进行窗口化。
</p>
<hr />
<p><strong>为什么要加窗函数？</strong></p>
<p>每次FFT变换只能对有限长度的时域数据进行变换，因此，需要对时域信号进行信号截断。即使是周期信号，如果截断的时间长度不是周期的整数倍（周期截断），那么，截取后的信号将会存在泄漏。为了将这个泄漏误差减少到最小程度（注意我说是的减少，而不是消除），我们需要使用<strong>加权函数</strong>，也叫<strong>窗函数</strong>。<strong>加窗主要是为了使时域信号似乎更好地满足FFT处理的周期性要求，减少泄漏。</strong><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128233931.png" style="zoom:50%;" /></p>
<p><strong>Hann窗口</strong>又称升余弦窗。Hann窗可以看作是3个矩形时间窗的频谱之和，或者说是 3个 sinc(t) 型函数之和，而括号中的两项相对于第一个谱窗向左、右各移动了π/T，从而使旁瓣互相抵消，消去高频干扰和漏能。<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> <span class="math display">\[
w(n)=0.5\left(1-\cos \left(\frac{2 \pi n}{N-1}\right)\right)\tag{3}
\]</span> <img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128231128.png" style="zoom:40%;" /></p>
<hr />
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 确定测量点的数量并调整矢量的长度(为FFT做准备)</span></span><br><span class="line">N = <span class="built_in">length</span>(F);</span><br><span class="line">N = N - <span class="built_in">mod</span>(N,<span class="number">2</span>);</span><br><span class="line">F = F(<span class="number">1</span>:N);</span><br><span class="line">Fu = Fu(<span class="number">1</span>:N);</span><br><span class="line">Fb = Fb(<span class="number">1</span>:N);</span><br><span class="line"></span><br><span class="line"><span class="comment">% Hann窗函数</span></span><br><span class="line">win = hann(N);</span><br><span class="line"><span class="comment">% 幅度矫正</span></span><br><span class="line">Ampkorr = N./sum(win);</span><br><span class="line"><span class="comment">% 调整后的Hann窗数据</span></span><br><span class="line">F = F.*win.*Ampkorr;</span><br><span class="line">Fu = Fu.*win.*Ampkorr;</span><br><span class="line">Fb = Fb.*win.*Ampkorr;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210128235252.png" style="zoom: 60%;" /></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 使用FFT，快速傅里叶变换</span></span><br><span class="line">YF = fft(F)/N;</span><br><span class="line">YFu = fft(Fu)/N;</span><br><span class="line">YFb = fft(Fb)/N;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 提取幅度信息（注意对称性）</span></span><br><span class="line">YF = <span class="number">2</span>*<span class="built_in">abs</span>(YF(<span class="number">1</span>:N/<span class="number">2</span>+<span class="number">1</span>));</span><br><span class="line">YF(<span class="number">1</span>) = YF(<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">YFu = <span class="number">2</span>*<span class="built_in">abs</span>(YFu(<span class="number">1</span>:N/<span class="number">2</span>+<span class="number">1</span>));</span><br><span class="line">YFu(<span class="number">1</span>) = YFu(<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">YFb = <span class="number">2</span>*<span class="built_in">abs</span>(YFb(<span class="number">1</span>:N/<span class="number">2</span>+<span class="number">1</span>));</span><br><span class="line">YFb(<span class="number">1</span>) = YFb(<span class="number">1</span>)/<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210129000208.png" style="zoom:60%;" /></p>
<h2 id="声音信号处理">2. 声音信号处理</h2>
<p>警车的喇叭声记录在 "<a href="https://github.com/Mr-Maohaha/Matlab/blob/main/Modellierung%20und%20Simulation%20in%20der%20Fahrzeugtechnik/Signalanalyse/Sirene.mp3?raw=true">Sirene.mp3</a>" 文件中。</p>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 将文件导入MATLAB工作区
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">[y,Fs] = audioread(<span class="string">&#x27;Sirene.mp3&#x27;</span>);</span><br><span class="line"><span class="comment">% y: 	sampled data</span></span><br><span class="line"><span class="comment">% Fs:	sample rate for that data</span></span><br><span class="line"><span class="comment">% 任务2仅需要第二条音轨</span></span><br><span class="line">y = y(:,<span class="number">2</span>);</span><br><span class="line">N = <span class="built_in">length</span>(y);</span><br><span class="line"><span class="comment">% 建立时间向量</span></span><br><span class="line">t = (<span class="number">0</span>:N<span class="number">-1</span>)./Fs;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210130163900.png" style="zoom: 50%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务2</b></font>: 将信号分成 𝑛<sub>𝑠𝑒𝑐</sub> = 200 个独立部分，重叠率 (Überlappung) 为75％。 使用Hann窗口计算各个部分的频谱。 使用两个导入的立体声声轨中的第二个进行分析。
</p>
<hr />
<p>FFT是为无限周期信号定义的。但音轨的振幅<strong>不是恒定</strong>的，更改信号频率时也会出现问题。</p>
<p>因此分段对音频进行FFT处理。观察到一段数据记录完成后，立刻进行FFT处理，其中信号采集的时间比FFT计算时间长得多。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131135001.jpeg" style="zoom:67%;" /></p>
<p>但可以发现，当一个FFT处理流程结束后，大部分时间都处于闲置状态。如果此时不是等待一个全新采集信号，而是将目前最新的信号记录与一些旧数据重叠，那么在计算FFT的同时将获得一个新的频谱，下图中说明了这种重叠处理。<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131135834.jpeg" style="zoom:67%;" /></p>
<p>这是一个随机信号在原始时域中的样子，与重叠的窗口相乘之后，在相乘的窗口上应用FFT之后，它的样子：<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131140324.png" style="zoom:80%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131141035.png" style="zoom:50%;" /> <span class="math display">\[
N=\left[1+\left(n_{s}-1\right)(1-\text { overlap })\right] \cdot L\tag{4}
\]</span></p>
<table>
<thead>
<tr class="header">
<th>参数</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><i>N</i></td>
<td>信号总长度</td>
</tr>
<tr class="even">
<td><i>L</i></td>
<td>单节长度</td>
</tr>
<tr class="odd">
<td><i>n<sub>s</sub></i></td>
<td>节数</td>
</tr>
<tr class="even">
<td><i>overlap</i></td>
<td>各部分的重叠 [%]</td>
</tr>
</tbody>
</table>
<hr />
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">ns = <span class="number">200</span>;</span><br><span class="line"><span class="comment">% 定义重叠率</span></span><br><span class="line">overlap = <span class="number">0.75</span>;</span><br><span class="line"><span class="comment">% 计算单节长度</span></span><br><span class="line">L = <span class="built_in">floor</span>(N/(<span class="number">1</span>+(ns<span class="number">-1</span>)*(<span class="number">1</span>-overlap)));</span><br><span class="line">L = L-<span class="built_in">mod</span>(L,<span class="number">2</span>);</span><br><span class="line"><span class="comment">% 根据式(3)给出Hann窗函数</span></span><br><span class="line">hannwin = @(N)<span class="number">0.5</span>*(<span class="number">1</span>+<span class="built_in">cos</span>((<span class="number">2</span>*<span class="built_in">pi</span>*<span class="built_in">linspace</span>(-N/<span class="number">2</span>,N/<span class="number">2</span><span class="number">-1</span>,N))/N));</span><br><span class="line"><span class="comment">% 计算每一节开始和结束的索引</span></span><br><span class="line">start = <span class="built_in">floor</span>(<span class="built_in">linspace</span>(<span class="number">1</span>,N-L,ns));</span><br><span class="line">ende = start+L<span class="number">-1</span>;</span><br><span class="line"><span class="comment">% 分配内存</span></span><br><span class="line">Amp = <span class="built_in">zeros</span>(L/<span class="number">2</span>+<span class="number">1</span>,ns);</span><br><span class="line"><span class="comment">% 窗函数</span></span><br><span class="line">win = hannwin(L);</span><br><span class="line"><span class="comment">% 进行FFT运算</span></span><br><span class="line"><span class="keyword">for</span> idx = <span class="number">1</span>:ns</span><br><span class="line">    <span class="comment">% 选择单节信号</span></span><br><span class="line">    y_idx = y(start(idx):ende(idx));</span><br><span class="line">    <span class="comment">% 窗口和幅度校正 (注意窗函数的维数)</span></span><br><span class="line">    y_idx = y_idx(:).*win(:).*L./sum(win);</span><br><span class="line">    <span class="comment">% 计算FFT</span></span><br><span class="line">    Yc = fft(y_idx)/L;</span><br><span class="line">    <span class="comment">% 计算振幅并储存在Amp</span></span><br><span class="line">    Amp(:,idx) = <span class="number">2</span>*<span class="built_in">abs</span>(Yc(<span class="number">1</span>:L/<span class="number">2</span>+<span class="number">1</span>));</span><br><span class="line">    Amp(<span class="number">1</span>,idx) = Amp(<span class="number">1</span>,idx)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% 建立时间矢量</span></span><br><span class="line">f = Fs/<span class="number">2.</span>*(<span class="number">0</span>:N/<span class="number">2</span>)./N;</span><br></pre></td></tr></table></figure>
<p style="background-color:Wheat">
<font size=4><b>任务3</b></font>: 在图中显示计算出的幅度（颜色编码的线性色轴），水平轴显示时间，垂直轴显示频率，范围为 <i>f</i> = [0 8000] <i>Hz</i>。 对色轴使用限制 [0，0.02]。
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">fID = <span class="built_in">figure</span>;</span><br><span class="line">imagesc(t,f,<span class="built_in">log10</span>(Amp));</span><br><span class="line"><span class="comment">% 插入色轴</span></span><br><span class="line">c = colorbar;</span><br><span class="line"><span class="comment">% 旋转视图</span></span><br><span class="line">view(<span class="number">0</span>,<span class="number">-90</span>);</span><br><span class="line"><span class="comment">% 轴的标签</span></span><br><span class="line">title(<span class="string">&#x27;„Sirene.mp3“-频谱图&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;t [s]&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;f [Hz]&#x27;</span>);</span><br><span class="line">ylabel(c,<span class="string">&#x27;Amp -&#x27;</span>);</span><br><span class="line"><span class="comment">% 缩放轴</span></span><br><span class="line">ylim([<span class="number">0</span> <span class="number">8000</span>])</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210131160730.png" style="zoom:50%;" /></p>
<h2 id="参考文献">参考文献</h2>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>WIKIPEDIA, ‘‘低通滤波器,” 2019.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>胡广书,现代信号处理教程.清华大学出版社, 2004.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>谭祥军, ‘‘什么是窗函数?” 2016. url: https://zhuanlan.zhihu.com/p/24318554<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>WIKIPEDIA, “Hann窗,” 2021.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>天天杂谈, ‘‘信号分析之: fft计算中的"重叠"处理(overlap processing),” 2020.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>MathWorks, “dsp.stft.”<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>TU-Branschweig</category>
        <category>车辆技术中的建模与仿真</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
        <tag>车辆技术</tag>
        <tag>信号分析</tag>
      </tags>
  </entry>
  <entry>
    <title>简单车辆模型-垂直动力学1</title>
    <url>/Modeling-and-simulation-in-vehicle-technology-Analyse-von-Eigenschwingungen/</url>
    <content><![CDATA[<h2 id="四分之一车辆模型">0. 四分之一车辆模型</h2>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214165941.png" style="zoom:80%;" /></p>
<p>如下图给出了简化为三质量块的四分之一车辆模型的车辆。 目的是检查由于行驶在路缘上而导致的车轮垂直振动。其中 <i>m<sub>s</sub></i> 代表座位，<i>m<sub>a</sub></i> 代表车身， <i>m<sub>r</sub></i> 代表车轮。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210207164259.png" style="zoom: 80%;" /></p>
<p><strong>给定参数</strong>: <span class="math display">\[
\begin{array}{lll}
\mathrm{mr}=40 \mathrm{~kg} &amp; \mathrm{br}=0 \mathrm{~Ns} / \mathrm{m} &amp; \mathrm{Cr}=100 \mathrm{~kN} / \mathrm{m} \\ \mathrm{m}_{\mathrm{a}}=400 \mathrm{~kg} &amp; \mathrm{~b}_{\mathrm{a}}=1500 \mathrm{~Ns} / \mathrm{m} &amp; \mathrm{C}_{\mathrm{a}}=20 \mathrm{~kN} / \mathrm{m} \\ \mathrm{m}_{\mathrm{s}}=30 \mathrm{~kg} &amp; \mathrm{~b}_{\mathrm{s}}=300 \mathrm{~Ns} / \mathrm{m} &amp; \mathrm{C}_{\mathrm{s}}=10 \mathrm{~kN} / \mathrm{m} \\ \\\mathrm{u}_{0} =0.2 \mathrm{~m} &amp; \;\mathrm{t}_{\mathrm{s}}=0.5 \mathrm{~s} 
\end{array}
\]</span> <strong>运动方程:</strong> <span class="math display">\[
\begin{eqnarray*} 
m_{r} \ddot{x}_{1}&amp;+&amp;b_{a}\left(\dot{x}_{1}-\dot{x}_{2}\right)+b_{r} \dot{x}_{1}+c_{a}\left(x_{1}-x_{2}\right)+c_{r} x_{1}=c_{r} u(t)+b_{r} \dot{u}(t)\tag{1.1} \\ 
m_{a} \ddot{x}_{2}&amp;+&amp;b_{s}\left(\dot{x}_{2}-\dot{x}_{3}\right)+b_{a}\left(\dot{x}_{2}-\dot{x}_{1}\right)+c_{s}\left(x_{2}-x_{3}\right)+c_{a}\left(x_{2}-x_{1}\right)=0 \tag{1.2}\\ 
m_{s} \ddot{x}_{3}&amp;+&amp;b_{s}\left(\dot{x}_{3}-\dot{x}_{2}\right)+c_{s}\left(x_{3}-x_{2}\right)=0 \tag{1.3}
\end{eqnarray*}
\]</span> <strong>激励函数</strong>: <span class="math display">\[
u(t)=\left\{\begin{array}{ll}0 &amp; \quad  t&lt;t_{s} \\ u_{0} &amp; \quad t \geq t_{s}\end{array}\right.\tag{2}
\]</span></p>
<p>式中的激励 <i><b>u</b></i><b>(<i>t</i>)</b> 的来源有三:</p>
<ol type="1">
<li>颠簸</li>
<li>驱动扭矩的波动</li>
<li>自行车与道路之间的相互作用</li>
</ol>
<h2 id="偏微分方程分析">1. 偏微分方程分析</h2>
<p style="padding-left: 1em;">
<b>一般求解过程 (线性系统):</b>
</p>
<ol type="1">
<li><p>建立系统矩阵 <i><b>A</b></i></p></li>
<li><p>求解特征多项式 <span class="math display">\[
\operatorname{det}(A-\lambda E)=0
\]</span></p></li>
<li><p>插入特征值求特征向量</p></li>
</ol>
<p style="padding-left: 1em;">
<b>数值求解方法 (非线性系统):</b>
</p>
<ol type="1">
<li>线性化 → 用系统矩阵 <i><b>A</b></i> 进行特征值分析。</li>
<li>在时域计算偏微分方程的数值解</li>
</ol>
<p><strong>线性系统的状态空间表示:</strong> <span class="math display">\[
\begin{eqnarray*}
\dot{\underline{x}}=\underline{\underline{A}}\, &amp;\underline{x}&amp;+\underline{\underline{B}}\, \underline{u}\tag{3}\\
\underline{y}=\underline{\underline{C}}\, &amp;\underline{x}&amp;+\underline{\underline{D}}\, \underline{u}\tag{4}\\
&amp;\Updownarrow&amp;\\
\dot{\xi}=A &amp;\xi&amp;+F\tag{5}
\end{eqnarray*}
\]</span></p>
<p>式 (3) 描述了输入变量 <i><b>u</b></i> 对状态变量 <i><b>x, ẋ</b></i> 的影响, 式 (4) 描述了输入变量 <i><b>u</b></i> 和输出变量 <i><b>y</b></i> 的关系。</p>
<table>
<thead>
<tr class="header">
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><i>A</i></td>
<td>系统矩阵 (Systemmatrix)</td>
</tr>
<tr class="even">
<td><i>B</i></td>
<td>输入矩阵 (Eingangsmatrix)</td>
</tr>
<tr class="odd">
<td><i>C</i></td>
<td>输出矩阵 (Ausgangsmatrix)</td>
</tr>
<tr class="even">
<td><i>D</i></td>
<td>连续性矩阵 (Durchgangsmatrix)</td>
</tr>
<tr class="odd">
<td><i>u</i></td>
<td>输入信号 (Eingangssignal)</td>
</tr>
<tr class="even">
<td><i>x</i></td>
<td>状态向量 (Zustandsvektor)</td>
</tr>
<tr class="odd">
<td><i>y</i></td>
<td>输出信号 (Ausgangssignal)</td>
</tr>
</tbody>
</table>
<p>运动方程 (1) 转换形式: <span class="math display">\[
\begin{eqnarray*}
\ddot{x}_{1}&amp;=&amp;\frac{1}{m_{r}}\left(c_{r} u(t)+b_{r} \dot{u}(t)-b_{a}\left(\dot{x}_{1}-\dot{x}_{2}\right)-b_{r} \dot{x}_{1}-c_{a}\left(x_{1}-x_{2}\right)-c_{r} x_{1}\right) \tag{6.1}\\ \ddot{x}_{2}&amp;=&amp;\frac{1}{m_{a}}\left(-b_{s}\left(\dot{x}_{2}-\dot{x}_{3}\right)-b_{a}\left(\dot{x}_{2}-\dot{x}_{1}\right)-c_{s}\left(x_{2}-x_{3}\right)-c_{a}\left(x_{2}-x_{1}\right)\right) \tag{6.2}\\ 
\ddot{x}_{3}&amp;=&amp;\frac{1}{m_{s}}\left(-\left(\dot{x}_{3}-\dot{x}_{2}\right)-c_{s}\left(x_{3}-x_{2}\right)\right) \tag{6.3}
\end{eqnarray*}
\]</span> 结合 (3), (4) 和 (6)，建立状态向量:</p>
<p><span class="math display">\[
\underline{x}=\left[\begin{array}{l}x_{1} \\ x_{2} \\ x_{3} \\ \dot{x}_{1} \\ \dot{x}_{2} \\ \dot{x}_{3}\end{array}\right] ; \quad 
\underline{\dot{x}}=\left[\begin{array}{l}\dot{x}_{1} \\ \dot{x}_{2} \\ \dot{x}_{3} \\ \ddot{x}_{1} \\ \ddot{x}_{2} \\ \ddot{x}_{3}\end{array}\right]; \quad
\underline{y}=\left[\begin{array}{c}
x_{1} \\ 
x_{2} \\ 
x_{3} \\
0 \\ 
0 \\ 
0 
\end{array}\right]; \quad
\underline{u}=\left[\begin{array}{c}
u(t) \\ 
0 \\ 
0 \\ 
\dot{u}(t) \\ 
0 \\ 
0 
\end{array}\right]
\]</span></p>
<p>因为状态向量 <span class="math inline">\(\underline{x}\)</span> 和输出信号 <i><b>y</b></i> 相等, 因此:</p>
<p><span class="math display">\[
\underline{\underline{C}} = 
\begin{bmatrix}
1&amp;0&amp;0&amp;&amp;&amp;\\
0&amp;1&amp;0&amp;&amp;\underline{\underline{0}}&amp;\\
0&amp;0&amp;1&amp;&amp;&amp;\\
&amp;&amp;&amp;&amp;&amp;\\
&amp;\underline{\underline{0}}&amp;&amp;&amp;\underline{\underline{0}}&amp;\\
&amp;&amp;&amp;&amp;&amp;
\end{bmatrix};\qquad
\underline{\underline{D}} = 
\underline{\underline{0}}_{(6 \times 6)}
\]</span></p>
<p>系统矩阵和输入矩阵如下: <span class="math display">\[
\underline{\underline{B}} = 
\begin{bmatrix}
&amp;&amp;&amp;&amp;&amp;\\
&amp;\underline{\underline{0}}&amp;&amp;&amp;\underline{\underline{0}}&amp;\\
&amp;&amp;&amp;&amp;&amp;\\
{\Large\frac{c_r}{m_r}}&amp;0&amp;0&amp;{\Large\frac{b_r}{m_r}}&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0
\end{bmatrix}
\]</span></p>
<p><span class="math display">\[
\underline{\underline{A}} = 
\begin{bmatrix}
0&amp;0&amp;0&amp;1&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;1&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;1\\
-{\large\frac{c_r+c_a}{m_r}}&amp;{\large\frac{c_a}{m_r}}&amp;0&amp;-{\large\frac{b_r+b_a}{m_r}}&amp;{\large\frac{b_a}{m_r}}&amp;0\\
{\large\frac{c_a}{m_a}}&amp;-{\large\frac{c_a+c_s}{m_a}}&amp;{\large\frac{c_s}{m_a}}&amp;{\large\frac{b_a}{b_a}}&amp;-{\large\frac{b_a+b_s}{m_a}}&amp;{\large\frac{b_s}{m_a}}\\
0&amp;{\large\frac{c_s}{m_s}}&amp;-{\large\frac{c_s}{m_s}}&amp;0&amp;{\large\frac{b_s}{m_s}}&amp;-{\large\frac{b_s}{m_s}}
\end{bmatrix}
\]</span></p>
<p>因此 (3), (4) 展开形式如 (7), (8): <span class="math display">\[
\begin{array}{c}
\underbrace{\left[\begin{array}{l}\dot{x}_{1} \\ \dot{x}_{2} \\ \dot{x}_{3} \\ \ddot{x}_{1} \\ \ddot{x}_{2} \\ \ddot{x}_{3}\end{array}\right]}_{\Large\underline{\dot{x}}}=
\underbrace{\begin{bmatrix}
0&amp;0&amp;0&amp;1&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;1&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;1\\
-{\frac{c_r+c_a}{m_r}}&amp;{\frac{c_a}{m_r}}&amp;0&amp;-{\frac{b_r+b_a}{m_r}}&amp;{\frac{b_a}{m_r}}&amp;0\\
{\frac{c_a}{m_a}}&amp;-{\frac{c_a+c_s}{m_a}}&amp;{\frac{c_s}{m_a}}&amp;{\frac{b_a}{b_a}}&amp;-{\frac{b_a+b_s}{m_a}}&amp;{\frac{b_s}{m_a}}\\
0&amp;{\frac{c_s}{m_s}}&amp;-{\frac{c_s}{m_s}}&amp;0&amp;{\frac{b_s}{m_s}}&amp;-{\frac{b_s}{m_s}}
\end{bmatrix}}_{\Large\underline{\underline{A}}}
\cdot
\underbrace{\left[\begin{array}{l}x_{1} \\ x_{2} \\ x_{3} \\ \dot{x}_{1} \\ \dot{x}_{2} \\ \dot{x}_{3}\end{array}\right]}_{\Large\underline{x}}
+
\underbrace{\begin{bmatrix}
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
\frac{c_r}{m_r}&amp;0&amp;0&amp;{\frac{b_r}{m_r}}&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0
\end{bmatrix}}_{\Large\underline{\underline{B}}}
\cdot
\underbrace{\left[\begin{array}{c}u_1(t) \\ 0 \\ 0 \\ \dot{u}_{1}(t) \\ 0 \\ 0\end{array}\right]}_{\Large\underline{u}}
\end{array}\tag{7}
\]</span></p>
<p><span class="math display">\[
\left[\begin{array}{c}
x_{1} \\ 
x_{2} \\ 
x_{3} \\
0 \\ 
0 \\ 
0 
\end{array}\right] = 
\begin{bmatrix}
1&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;1&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;1&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;0
\end{bmatrix}
\cdot
\left[\begin{array}{l}{x}_{1} \\ {x}_{2} \\ {x}_{3} \\ \dot{x}_{1} \\ \dot{x}_{2} \\ \dot{x}_{3}\end{array}\right]\tag{8}
\]</span></p>
<p>将 (7) 中的 <span class="math inline">\(\underline{\underline{A}}\)</span> 简化: <span class="math display">\[
\underline{\underline{A}}=\left[\begin{array}{cc}
\underline{\underline{0}} &amp; I \\ 
-M^{-1} K &amp; -M^{-1} DM 
\end{array}\right]
\]</span> 其中 <span class="math display">\[
M = \begin{bmatrix}
m_r&amp;0&amp;0\\
0&amp;m_a&amp;0\\
0&amp;0&amp;m_s
\end{bmatrix}\quad
K = \begin{bmatrix}
c_r+c_a&amp;-c_a&amp;0\\
-c_a&amp;c_a+c_s&amp;-c_s\\
0&amp;-c_s&amp;c_s
\end{bmatrix}\quad 
DM = \begin{bmatrix}
b_r+b_a&amp;-b_a&amp;0\\
-b_a&amp;c_a+b_s&amp;-b_s\\
0&amp;-b_s&amp;b_s
\end{bmatrix}
\]</span></p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><i><b>M</b></i></td>
<td>质量矩阵 (Massenmatrix)</td>
</tr>
<tr class="even">
<td><i><b>K</b></i></td>
<td>刚度矩阵 (Steifigkeitsmatrix)</td>
</tr>
<tr class="odd">
<td><i><b>DM</b></i></td>
<td>阻尼矩阵 (Dämpfungsmatrix)</td>
</tr>
</tbody>
</table>
<p>将 (8) 代入 (5): <span class="math display">\[
\underline{\dot{\xi}} = \underbrace{\left[\begin{array}{cc}0 &amp; 1 \\ -M^{-1} K &amp; -M^{-1} DM\end{array}\right]}_{\text{系统矩阵 } {\underline{\underline{A}}}}\cdot\underline{\xi} + F\tag{9}
\]</span> 其中 <span class="math display">\[
\underline{\dot{\xi}}=
\begin{bmatrix}
\dot{\xi}_1\\
\dot{\xi}_2
\end{bmatrix}=
\begin{bmatrix}
\dot{x}\\
\ddot{x}
\end{bmatrix}=
\begin{bmatrix}
\dot{x}_1\\
\dot{x}_2\\
\dot{x}_3\\
\ddot{x}_1\\
\ddot{x}_2\\
\ddot{x}_3
\end{bmatrix};\quad
\underline{\xi}=
\begin{bmatrix}
{\xi}_1\\
{\xi}_2
\end{bmatrix}=
\begin{bmatrix}
x\\
\dot{x}
\end{bmatrix}=
\begin{bmatrix}
{x}_1\\
{x}_2\\
{x}_3\\
\dot{x}_1\\
\dot{x}_2\\
\dot{x}_3
\end{bmatrix}
;\quad
F=\begin{bmatrix}
0\\
0\\
0\\
\frac{1}{m_r}\begin{bmatrix}c_r&amp;b_r\end{bmatrix}\cdot
\begin{bmatrix}u(t)\\\dot{u}(t)\end{bmatrix}\\
0\\
0
\end{bmatrix}
\]</span></p>
<p>或者从偏微分方程的矩阵表达 (10) 直接推导: <span class="math display">\[
\underline{\underline{M}}\,
\underline{\ddot{z}}+
\underline{\underline{DM}}\,
\underline{\dot{z}}+
\underline{\underline{K}}\,
\underline{\ddot{z}}=
\underline{F}\tag{10}
\]</span></p>
<p><span class="math display">\[
\,
\underline{\ddot{z}}=
-\underline{\underline{M}}^{-1}\underline{\underline{DM}}\,
\underline{\dot{z}}
-\underline{\underline{M}}^{-1}\underline{\underline{K}}\,
\underline{\ddot{z}}+
-\underline{\underline{M}}^{-1}\underline{F}
\]</span></p>
<p>然后也可以推导出系统矩阵 <span class="math inline">\(\underline{\underline{A}}\)</span> 。</p>
<h2 id="matlab-skript">2. MATLAB Skript</h2>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 使用激励函数(2)对微分方程组进行数值求解：
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义全局变量</span></span><br><span class="line"><span class="keyword">global</span> mr ma ms br ba bs cr ca cs ts u0</span><br><span class="line"><span class="comment">% 定义系统参数</span></span><br><span class="line">mr = <span class="number">40</span>;</span><br><span class="line">ma = <span class="number">400</span>;</span><br><span class="line">ms = <span class="number">30</span>;</span><br><span class="line">br = <span class="number">0</span>;</span><br><span class="line">ba = <span class="number">1500</span>;</span><br><span class="line">bs = <span class="number">300</span>;</span><br><span class="line">cr = <span class="number">100e3</span>;</span><br><span class="line">ca = <span class="number">20e3</span>;</span><br><span class="line">cs = <span class="number">10e3</span>;</span><br><span class="line">ts = <span class="number">0.5</span>;</span><br><span class="line">u0 = <span class="number">0.2</span>;</span><br><span class="line"><span class="comment">% 定义时间向量，这里选择0到5s</span></span><br><span class="line">tspan = <span class="number">0</span>:<span class="number">0.001</span>:<span class="number">5</span>;</span><br><span class="line"><span class="comment">% 定义初始值，系统初始为</span></span><br><span class="line">xi0 = [<span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 1. 有显性方程的数值解</span></span><br><span class="line">[t_exp,xi_exp] = ode45(@ODE_exp, tspan, xi0);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ODE公式的显式表示法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[xip]</span> = <span class="title">ODE_exp</span><span class="params">(t,xi)</span></span></span><br><span class="line">	<span class="comment">% 从全局工作区加载系统参数</span></span><br><span class="line">	<span class="keyword">global</span> mr ma ms br ba bs cr ca cs ts u0</span><br><span class="line">	<span class="comment">% 将 xip (\dot&#123;\xi&#125;) 分配为列向量(并非必要)</span></span><br><span class="line">	xip = <span class="built_in">zeros</span>(<span class="number">6</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="comment">% 计算激励函数与时间的关系</span></span><br><span class="line">	<span class="comment">% 由于br = 0，因此导数up可以设置为0。</span></span><br><span class="line">	<span class="keyword">if</span> t&gt;ts</span><br><span class="line">		u = u0;</span><br><span class="line">		up = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		u = <span class="number">0</span>;</span><br><span class="line">		up = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">% 以显式形式计算xip中的元素</span></span><br><span class="line">	xip(<span class="number">1</span>) = xi(<span class="number">4</span>);</span><br><span class="line">	xip(<span class="number">2</span>) = xi(<span class="number">5</span>);</span><br><span class="line">	xip(<span class="number">3</span>) = xi(<span class="number">6</span>);</span><br><span class="line">	xip(<span class="number">4</span>) = <span class="number">1</span>/mr*(cr*u+br*up-ba*(xi(<span class="number">4</span>)-xi(<span class="number">5</span>))-br*xi(<span class="number">4</span>)-ca*(xi(<span class="number">1</span>)-xi(<span class="number">2</span>))-cr*xi(<span class="number">1</span>));</span><br><span class="line">	xip(<span class="number">5</span>) = <span class="number">1</span>/ma*(-bs*(xi(<span class="number">5</span>)-xi(<span class="number">6</span>))-ba*(xi(<span class="number">5</span>)-xi(<span class="number">4</span>))-ca*(xi(<span class="number">2</span>)-xi(<span class="number">1</span>))-cs*(xi(<span class="number">2</span>)-xi(<span class="number">3</span>)));</span><br><span class="line">	xip(<span class="number">6</span>) = <span class="number">1</span>/ms*(bs*(xi(<span class="number">5</span>)-xi(<span class="number">6</span>))+cs*(xi(<span class="number">2</span>)-xi(<span class="number">3</span>)));</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 矩阵方程式</span></span><br><span class="line"><span class="keyword">global</span> A</span><br><span class="line">M = <span class="built_in">diag</span>([mr ma ms]);</span><br><span class="line">B = [	br+ba,	-ba,	<span class="number">0</span>;</span><br><span class="line">		-ba,	ba+bs,	-bs;</span><br><span class="line">		<span class="number">0</span>,		-bs,	bs];</span><br><span class="line">C = [	cr+ca,	-ca,	<span class="number">0</span>;</span><br><span class="line">		-ca,	ca+cs,	-cs;</span><br><span class="line">		<span class="number">0</span>,		-cs,	cs];</span><br><span class="line">A = [	<span class="built_in">zeros</span>(<span class="number">3</span>), 	<span class="built_in">eye</span>(<span class="number">3</span>);</span><br><span class="line">		-M\C,		-M\B];</span><br><span class="line"><span class="comment">% 2. 矩阵形式的数值解</span></span><br><span class="line">[t_mat,xi_mat] = ode45(@ODE_mat, tspan, xi0);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[xip]</span> = <span class="title">ODE_mat</span><span class="params">(t,xi)</span></span></span><br><span class="line">	<span class="keyword">global</span> A mr cr br ts u0</span><br><span class="line">	xip = <span class="built_in">zeros</span>(<span class="number">6</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span> t&gt;ts</span><br><span class="line">		u = u0;</span><br><span class="line">		up = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		u = <span class="number">0</span>;</span><br><span class="line">		up = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">% 考虑到外部激励</span></span><br><span class="line">	U = [u; up];</span><br><span class="line">	F = [<span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>; [cr, br]*U/mr; <span class="number">0</span>; <span class="number">0</span>];</span><br><span class="line">	<span class="comment">% 计算 xip</span></span><br><span class="line">	<span class="comment">% A*xi 考虑系统内部反馈，向量F考虑作用在系统上的外力</span></span><br><span class="line">	xip = A*xi+F;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p style="background-color:Wheat">
<font size=4><b>任务2</b></font>: 在三个子图中绘制 <i>x</i>(t), <i>ẋ</i>(t) 和相图 <i>ẋ</i>(<i>x</i>)
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;Position&#x27;</span>,[<span class="number">0</span> <span class="number">0</span> <span class="number">1200</span> <span class="number">600</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">% 创建并选择用于绘制x(t)的子图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">5</span>,[<span class="number">1</span> <span class="number">2</span>])</span><br><span class="line"><span class="built_in">plot</span>(t_exp,xi_exp(:,<span class="number">1</span>:<span class="number">3</span>))</span><br><span class="line">xlabel(<span class="string">&#x27;时间 [s]&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;位移 [m]&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;四分之一车辆模型的各质量块运动过程&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(&#123;<span class="string">&#x27;轮子&#x27;</span>,<span class="string">&#x27;车身&#x27;</span>,<span class="string">&#x27;座位&#x27;</span>&#125;,<span class="string">&#x27;Location&#x27;</span>,<span class="string">&#x27;eastoutside&#x27;</span>)</span><br><span class="line">grid on</span><br><span class="line"><span class="comment">% 创建并选择用于绘制xp(t)的子图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">5</span>,[<span class="number">6</span> <span class="number">7</span>])</span><br><span class="line"><span class="built_in">plot</span>(t_exp,xi_exp(:,<span class="number">4</span>:<span class="keyword">end</span>))</span><br><span class="line">xlabel(<span class="string">&#x27;时间 [s]&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;速度 [m/s]&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;四分之一车辆模型的各质量块运动速度&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(&#123;<span class="string">&#x27;轮子&#x27;</span>,<span class="string">&#x27;车身&#x27;</span>,<span class="string">&#x27;座位&#x27;</span>&#125;,<span class="string">&#x27;Location&#x27;</span>,<span class="string">&#x27;eastoutside&#x27;</span>)</span><br><span class="line">grid on</span><br><span class="line"><span class="comment">% 创建和选择用于绘制相图的子图</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">5</span>, [<span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span>])</span><br><span class="line"><span class="built_in">plot</span>(xi_exp(:,<span class="number">1</span>:<span class="number">3</span>),xi_exp(:,<span class="number">4</span>:<span class="keyword">end</span>))</span><br><span class="line">xlabel(<span class="string">&#x27;位移 [m]&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;速度 [m/s]&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;各质量块的相图&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span>(&#123;<span class="string">&#x27;轮子&#x27;</span>,<span class="string">&#x27;车身&#x27;</span>,<span class="string">&#x27;座位&#x27;</span>&#125;,<span class="string">&#x27;Location&#x27;</span>,<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213175746.png" style="zoom:80%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务3</b></font>: 在没有外部刺激的情况下，确定一个质量块最初偏移 <i>x</i><sub>0</sub>= 0.3 <i>m</i> 的情况下,位移随时间变化的过程。
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 重新建立初始条件</span></span><br><span class="line">xi0_1 = [<span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]*<span class="number">0.3</span>;</span><br><span class="line">xi0_2 = [<span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]*<span class="number">0.3</span>;</span><br><span class="line">xi0_3 = [<span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]*<span class="number">0.3</span>;</span><br><span class="line"><span class="comment">% 外部激励为0</span></span><br><span class="line">u0 = <span class="number">0</span>;</span><br><span class="line"><span class="comment">% 计算数值解</span></span><br><span class="line">[t1,xi1] = ode45(@ODE_UE4_exp,tspan,xi0_1);</span><br><span class="line">[t2,xi2] = ode45(@ODE_UE4_exp,tspan,xi0_2);</span><br><span class="line">[t3,xi3] = ode45(@ODE_UE4_exp,tspan,xi0_3);</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213181119.jpg" style="zoom:80%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213181130.jpg" style="zoom:80%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210213181138.jpg" style="zoom:80%;" /></p>
<h2 id="matlab-simulink">3. MATLAB Simulink</h2>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 使用激励函数(2)对微分方程组进行数值求解：
</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209203914.png" title="Simulink模型" style="zoom:80%;" /></p>
<p><strong>模块及参数设置</strong></p>
<ul>
<li><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209214832.png"   /> Clock × 1</li>
<li><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209214954.png"  style="zoom:80%;" /> Scope × 1</li>
<li><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209204844.png" style="zoom:80%;" /> Constant × 2
<ol type="1">
<li>Constant Value: 0</li>
<li>Constant Value: u0</li>
</ol></li>
<li><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209205159.png"  style="zoom:80%;" /> Switch × 1
<ul>
<li>Criteria for passing first input: <code>&gt;=Threshold</code></li>
<li>Threshold: 0.5</li>
</ul></li>
<li><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209205554.png"  style="zoom:80%;" /> State-Space × 1
<ul>
<li>Parameters, A: A</li>
<li>Parameters, B: B</li>
<li>Parameters, C: C</li>
<li>Parameters, D: D</li>
</ul></li>
</ul>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 将 u0, A, B, C, D 另存于 Parameter.m</span></span><br><span class="line">mr = <span class="number">40</span>;</span><br><span class="line">ma = <span class="number">400</span>;</span><br><span class="line">ms = <span class="number">30</span>;</span><br><span class="line">br = <span class="number">0</span>;</span><br><span class="line">ba = <span class="number">1500</span>;</span><br><span class="line">bs = <span class="number">300</span>;</span><br><span class="line">cr = <span class="number">100e3</span>;</span><br><span class="line">ca = <span class="number">20e3</span>;</span><br><span class="line">cs = <span class="number">10e3</span>;</span><br><span class="line">ts = <span class="number">0.5</span>;</span><br><span class="line">u0 = <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line">M = <span class="built_in">diag</span>([mr ma ms]);</span><br><span class="line">DM = [br+ba,	 -ba,		<span class="number">0</span>;</span><br><span class="line">	-ba,	ba+bs,	 -bs;</span><br><span class="line">	<span class="number">0</span>,			-bs,	bs];</span><br><span class="line">K = [cr+ca,	 -ca,		<span class="number">0</span>;</span><br><span class="line">	-ca,	ca+cs,	 -cs;</span><br><span class="line">	<span class="number">0</span>,			-cs,	cs];</span><br><span class="line">    </span><br><span class="line"><span class="comment">% for State-Space </span></span><br><span class="line">A = [<span class="built_in">zeros</span>(<span class="number">3</span>), <span class="built_in">eye</span>(<span class="number">3</span>);</span><br><span class="line">		-inv(M)*K,		-inv(M)*DM];</span><br><span class="line">B = [<span class="number">0</span>;<span class="number">0</span>;<span class="number">0</span>;cr/mr;<span class="number">0</span>;<span class="number">0</span>];</span><br><span class="line">C = [<span class="built_in">eye</span>(<span class="number">3</span>),<span class="built_in">zeros</span>(<span class="number">3</span>);<span class="built_in">zeros</span>(<span class="number">3</span>),<span class="built_in">zeros</span>(<span class="number">3</span>)];</span><br><span class="line">D = <span class="built_in">zeros</span>(<span class="number">6</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>为了在运行Simulink模型时预加载 Parameter.m，模型空白处 <kbd>right click</kbd>→<kbd>Model Properities</kbd>→<kbd>Callbacks</kbd>→<kbd>InitFcn</kbd></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209214235.png"  style="zoom:80%;" /></p>
<p>然后运行Simulink模型，在Scope模块中显示:</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209214712.png"  style="zoom:80%;" /></p>
]]></content>
      <categories>
        <category>TU-Branschweig</category>
        <category>车辆技术中的建模与仿真</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
        <tag>车辆技术</tag>
        <tag>振动分析</tag>
        <tag>行驶动力学</tag>
      </tags>
  </entry>
  <entry>
    <title>横向动力学</title>
    <url>/Modeling-and-simulation-in-vehicle-technology-Querdynamik/</url>
    <content><![CDATA[<h2 id="横向动力学">0. 横向动力学</h2>
<p>为了简化车辆模型，在横向动力学分析中，通常采用线性单轨车辆模型。线性单轨车辆模型有如下假设:</p>
<ul>
<li><p>每个车轴减少一个车轮 <span class="math display">\[
c_\alpha=c_{\alpha,l} + c_{\alpha,r}
\]</span></p></li>
<li><p>总质量位于重心，重心位于车道高度。</p>
<p>⇒ 因此省略了滚动，俯仰和提升运动</p></li>
<li><p>车速平均</p></li>
<li><p>转向角很小 <span class="math display">\[
\sin(x) = x\qquad \cos(x)=1\qquad\tan(x)=x
\]</span></p></li>
<li><p>车轮负载没有波动</p></li>
<li><p>两种系统状态</p>
<ul>
<li>偏航率 (Gierrate): <span class="math inline">\(\dot{\gamma}\)</span></li>
<li>滑移角度 (Schwimmwinkel): <span class="math inline">\(\beta\)</span></li>
</ul></li>
<li><p>线性轮胎特性</p></li>
<li><p>纯前轴转向: <span class="math inline">\(\delta_h=0\)</span></p></li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210219105232.png" title="单轨车辆模型" style="zoom:80%;" /></p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\alpha\)</span></td>
<td>偏航角 (Schräglaufwinkel am Rad)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(c_\alpha\)</span></td>
<td>偏滑刚度 (Schräglaufsteife)</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\beta\)</span></td>
<td>滑移角度 (Schwimmwinkel)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\gamma\)</span></td>
<td>偏航角 (Gierwinkel)</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\delta\)</span></td>
<td>转向角 (Lenkwinkel)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\theta\)</span></td>
<td><span class="math inline">\(z\)</span> 轴惯性矩 (Trägheitsmoment über <span class="math inline">\(z\)</span>-Achse)</td>
</tr>
</tbody>
</table>
<h2 id="运动方程推导">1. 运动方程推导</h2>
<p>车辆横向方向的运动方程: <span class="math display">\[
\begin{align}m\cdot {a_y} &amp;= F_{y,V}+F_{y,H}\\&amp;= F_{y,V}^R\cdot cos\delta+F_{y,H}^R\\&amp;\approx F_{y,V}^R+F_{y,H}^R\end{align}\tag{1}
\]</span></p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(m\)</span></td>
<td>车辆质量 (Fahrzeugmasse)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(a_y\)</span></td>
<td>车辆在 <span class="math inline">\(y\)</span> 轴的加速度 (Fahrzeugbeschleunigung am <span class="math inline">\(y\)</span>-Achse)</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(F_{y,v},\;F_{y,h}\)</span></td>
<td><span class="math inline">\(y\)</span> 轴侧向力-作用于前后轴 (Seitenkräfte am Längsachse)</td>
</tr>
<tr class="even">
<td><span class="math inline">\(F_{y,v}^R,\;F_{y,h}^R\)</span></td>
<td><span class="math inline">\(y\)</span> 轴侧向力-作用于前后轴 (Seitenkräfte am Rad)</td>
</tr>
</tbody>
</table>
<p>分析通过 <span class="math inline">\(z\)</span> 轴的车辆质心的力: <span class="math display">\[
\begin{align}\theta\cdot\ddot{\gamma} &amp;= F_{y,v}\cdot a_1-F_{y,h}\cdot a_2\\&amp;=F_{y,v}^R\cdot a_1\cdot \underbrace{cos\delta}_{\approx1}-F_{y,h}^R\cdot a_2\end{align}\tag{2}
\]</span> 列出系统方程: <span class="math display">\[
\dot{x} = Ax+Bu\qquad x = \begin{bmatrix}\dot{\psi}\\\beta\end{bmatrix}
\]</span> 所以要将 (1) 中的 <span class="math inline">\(a_y\)</span> 用 <span class="math inline">\(\dot{\gamma},\;\beta\)</span> 替代。其中 <span class="math inline">\(a_y\)</span> 通过平移加速度和旋转加速度组成。</p>
<ul>
<li><p>平移 (Translation) <span class="math display">\[
\begin{align}a_{y,trans}&amp;=\frac{dv_y}{dt}=\frac{d(v\cdot sin\beta)}{dt}\\&amp;=v\cdot \dot{\beta}\cdot \underbrace{cos\beta}_{1}+\underbrace{\dot{v}\cdot sin\beta}_{0,\text{ 因为}\; \dot{v}=0}\\&amp;=v\cdot\dot{\beta}\end{align}
\]</span></p></li>
<li><p>旋转 (Rotation) <span class="math display">\[
a_{y,rot }=\frac{v^2}{R}\quad\text{其中}\;v=\dot{\gamma}R\\
a_{y.rot}=\frac{v\cdot \dot{\gamma}\cdot R}{R}=v\cdot \dot{\gamma}
\]</span></p></li>
</ul>
<p>因此 <span class="math inline">\(a_y\)</span> 为: <span class="math display">\[
\begin{align}
a_y&amp;=a_{y,trans}+a_{y,rot}\\
&amp;=v\cdot(\dot{\beta}+\dot{\gamma})
\end{align}\tag{3}
\]</span> 因为采用了线性轮胎特性，因此: <span class="math display">\[
F_{y,h}=F_{y.h}^R=c_{\alpha,h}\cdot \alpha_h \qquad F_{y,v}=F_{y.v}^R=c_{\alpha,v}\cdot \alpha_v\tag{4}
\]</span> 计算偏航角 (Schräglaufwinkel):</p>
<ul>
<li><p>考虑前轮: <span class="math display">\[
\tan(\alpha_h)=\frac{-v_{y,h}}{v_{x,h}}=\tan(\alpha_H)=\frac{-v\cdot \sin\beta+\dot{\gamma}\cdot a_2}{v\cdot \cos\beta}=-\tan\beta+\frac{\dot{\gamma}\cdot a_2}{v\cdot \cos\beta}
\]</span></p>
<p><span class="math display">\[
\alpha_h=-\beta + \frac{\dot{\gamma}\cdot a_2}{v}\tag{5}
\]</span></p></li>
<li><p>考虑后轮: <span class="math display">\[
\tan(\delta-\alpha_v)=\frac{v_{y,v}}{v_{x,v}}=\frac{v\cdot \sin\beta+\dot{\gamma}\cdot a_1}{v\cdot \cos\beta}=\tan\beta+\frac{\dot{\gamma}\cdot a_1}{v\cdot \cos\beta}
\]</span></p>
<p><span class="math display">\[
\alpha_v=-\beta+\frac{\dot{\psi}\cdot a_2}{v}\tag{6}
\]</span></p></li>
</ul>
<p>将前后轮偏航角 <span class="math inline">\(\alpha_v,\;\alpha_h\)</span> 代入 (1) 力平衡: <span class="math display">\[
\begin{align}
mv(\dot{\gamma}+\dot{\beta})&amp;=c_{\alpha,v}\cdot \alpha_v+c_{\alpha,h}\cdot \alpha_h\\
mv\dot{\gamma}+mv\dot{\beta}&amp;=c_{\alpha,v}(-\beta-\frac{\dot{\gamma}}{v}a_1+\delta)+c_{\alpha,h}(-\beta+\frac{\dot{\gamma}}{v}a_2)
\end{align}
\]</span></p>
<p><span class="math display">\[
\dot{\beta}=(-1+\frac{c_{\alpha,h}\cdot a_2-c_{\alpha,v}\cdot a_1}{mv^2})\dot{\gamma}-\frac{c_{\alpha,h}+c_{\alpha,v}}{m v}\beta+\frac{c_{\alpha,v}}{mv}\delta\tag{7}
\]</span></p>
<p> • (7) 的偏微分方程形式: <span class="math display">\[
m v \dot{\beta}+\left(m v^{2}+c_{\alpha v} a_{1}-c_{\alpha h} a_{2}\right) \frac{\dot{\gamma}}{v}+\left(c_{\alpha v}+c_{\alpha h}\right) \beta=c_{\alpha v} \delta\tag{8}
\]</span> 将前后轮偏航角 <span class="math inline">\(\alpha_v,\;\alpha_h\)</span> 代入 (2) 力矩平衡: <span class="math display">\[
\theta\ddot{\gamma}=c_{\alpha,v}\cdot\alpha_v\cdot a_1-c_{\alpha,h}\cdot\alpha_h\cdot a_2
\]</span></p>
<p><span class="math display">\[
\ddot{\gamma}=-\frac{c_{\alpha,v}\cdot a_1^2+c_{\alpha,h}\cdot a_2^2}{\theta\cdot v}\dot{\gamma}+\frac{c_{\alpha,h}\cdot a_2-c_{\alpha,v}\cdot a_2}{\theta}\beta+\frac{c_{\alpha,v}\cdot a_2}{\theta}\delta\tag{9}
\]</span></p>
<p> • (9) 的偏微分方程形式: <span class="math display">\[
\theta \ddot{\gamma}+\left(c_{\alpha v} a_{1}^{2}+c_{\alpha h} a_{2}^{2}\right) \frac{\dot{\gamma}}{v}+\left(c_{\alpha v} a_{1}-c_{\alpha h} a_{2}\right) \beta=c_{\alpha v} \cdot\delta a_{1}\tag{10}
\]</span></p>
<p>将上面两个式子用矩阵形式表示: <span class="math display">\[
\underbrace{
\begin{bmatrix}
\ddot\gamma\\
\dot\beta
\end{bmatrix}
}_{\dot{x}}=
\underbrace{
\begin{bmatrix}
-{\Large\frac{c_{\alpha v}\cdot a_1^2+c_{\alpha h}\cdot a_2^2}{\theta\cdot v}} &amp; -{\Large\frac{c_{\alpha v}\cdot a_1-c_{\alpha h}\cdot a_2}{\theta}}\\
-1-{\Large\frac{c_{\alpha v}\cdot a_1-c_{\alpha h}\cdot a_2}{mv^2}} &amp; -{\Large\frac{c_{\alpha v}+c_{\alpha h}}{mv}}
\end{bmatrix}
}_{A}
\underbrace{
\begin{bmatrix}
\dot\gamma\\
\beta
\end{bmatrix}
}_{x}+
\underbrace{
\begin{bmatrix}
{\Large\frac{c_{\alpha v}\cdot a_1}{\theta}}\\
{\Large\frac{c_{\alpha v}}{mv}}
\end{bmatrix}
}_{B}\cdot
\underbrace{\delta}_{u}
\]</span></p>
<h2 id="任务-skript">2. 任务 &amp; Skript</h2>
<p>线性单轨车辆模型应用于检查车辆的转向性能。 车辆以恒定速度 <span class="math inline">\(v\)</span> 沿直线行驶。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210219105232.png" title="单轨车辆模型" style="zoom:80%;" /></p>
<p><strong>运动方程:</strong> <span class="math display">\[
m v \dot{\beta}+\left(m v^{2}+c_{\alpha v} a_{1}-c_{\alpha h} a_{2}\right) \frac{\dot{\gamma}}{v}+\left(c_{\alpha v}+c_{\alpha h}\right) \beta=c_{\alpha v} \delta\\
\theta \ddot{\gamma}+\left(c_{\alpha v} a_{1}^{2}+c_{\alpha h} a_{2}^{2}\right) \frac{\dot{\gamma}}{v}+\left(c_{\alpha v} a_{1}-c_{\alpha h} a_{2}\right) \beta=c_{\alpha v} \cdot\delta a_{1}
\]</span> 在 <span class="math inline">\(t=0\)</span> 时，转向角 <span class="math inline">\(\delta(t)\)</span> 作用于前轮。 在（<span class="math inline">\(T_1 + T_2\)</span>）之后，所施加的转向角再次减小。 转向角函数如下图所示:</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210219124625.png"  style="zoom: 80%;" /></p>
<p>编写用于微分方程组数值解的MATLAB程序，并使求解器的最大积分步长为 <span class="math inline">\(10^{-2} \; s\)</span>。 在一张图中显示在车速为 <span class="math inline">\(v_1,\,v_2\)</span> 时的滑移角 <span class="math inline">\(\beta(t)\)</span>，偏航角速度 <span class="math inline">\(\dot{\gamma}(t)\)</span> 和转向角 <span class="math inline">\(\delta(t)\)</span>，标记所有轴和图表并插入相应的图例。</p>
<p><strong>给定参数</strong> <span class="math display">\[
\begin{array}{c}a_{1}=0,8 m ;\quad  a_{2}=1,3 m ;\quad c_{a v}=55000 \frac{N}{r a d} ;\quad c_{a h}=65000 \frac{N}{r a d} \\ T_{1}=0,5 s ;\quad  T_{2}=2,5 s ;\quad  m=1200 k g ;\quad  \theta=1200 k g m^{2} \\ v_{1}=30 \frac{k m}{h} ;\quad  v_{2}=100 \frac{k m}{h} ;\quad  \delta=4^{\circ}\end{array}
\]</span></p>
]]></content>
      <categories>
        <category>TU-Branschweig</category>
        <category>车辆技术中的建模与仿真</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
        <tag>车辆技术</tag>
        <tag>信号分析</tag>
      </tags>
  </entry>
  <entry>
    <title>Typora使用笔记-HTML篇</title>
    <url>/Typora-HTML/</url>
    <content><![CDATA[<h2 id="前言">0. 前言</h2>
<p>刚开始使用<strong>Typora</strong>的时候只会用 $ $ 写公式，不知道<strong>Markdown​</strong>还支持 （ <strong>HTML</strong> 其实就<strong>Typora</strong>官网上写着 (°ー°〃) ），在排版和表达方面都受到很大限制。后来逐渐在使用中摸索、尝试，搜集了一些在Typora中我常使用 <strong>HTML</strong> 命令。做个记录。</p>
<h2 id="文字-段落格式">1. 文字 + 段落格式</h2>
<h3 id="字体大小">1.1 字体大小</h3>
<p><font size="1">我字体大小为1</font></p>
<p><font size="2">我字体大小为2</font></p>
<p><font size="3">我字体大小为3</font></p>
<p><font size="4">我字体大小为4</font></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="文字颜色">1.2 文字颜色</h3>
<p>​ <span style="color:red">文字</span></p>
<p>​ <font color="red">文字</font></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://htmlcolorcodes.com/zh/yanse-ming/">HTML 颜色参考</a></p>
</blockquote>
<h3 id="背景颜色">1.3 背景颜色</h3>
<table>
<tr>
<td bgcolor="HotPink">
占满整行的段落背景颜色
</td>
</tr>
</table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">HotPink</span>&gt;</span>背景颜色<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>能放在任何位置的<span style="background-color:DarkOrange">色块</span></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background-color:DarkOrange&quot;</span>&gt;</span>色块<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="排版">2. 排版</h2>
<h3 id="空格">2.1 空格</h3>
<p>在<strong>Markdown</strong>中可以用空格将文本推到想要的位置，但是在导出<strong>PDF</strong>文件时却发现无论多少个空格只算一个。后发现用 <strong>HTML</strong> 的空格方法打出的空格会在<strong>PDF</strong>中保留，因此如果想要最后导出PDF文件的话最好用 <strong>HTML</strong> 的空格方法。</p>
<p> 1个&amp;thinsp</p>
<p> 1个&amp;nbsp</p>
<p> 1个&amp;ensp</p>
<p> 1个&amp;emsp</p>
<p>  2个&amp;emsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="symbol">&amp;thinsp;</span>	:小于一个字符的空格</span><br><span class="line"><span class="symbol">&amp;nbsp;</span> 		:一个字符的半角的不断行的空格</span><br><span class="line"><span class="symbol">&amp;ensp;</span> 		:一个字符的半角的空格</span><br><span class="line"><span class="symbol">&amp;emsp;</span> 		:两个字符的全角的空格</span><br></pre></td></tr></table></figure>
<h3 id="文本两端对齐">2.2 文本两端对齐</h3>
<p>如果使用中文书写，不会有这种困扰。但假如用外文书写，经常出现单词因为过长而换行的现象，导致排版过于丑陋。在<strong>Typora</strong>默认的几个主题中，只有 <strong>Whitey</strong> 支持段落文本两端对齐，但这个主题丑拒。</p>
<p>其实最简单的方法是在 <strong>CSS</strong> 主题文件中添加命令（在"Typora使用笔记-CSS篇"中介绍）。但考虑到易用性，想要写出的 <strong>.md</strong> 文件别人能直接使用，那 <strong>HTML</strong> 方法也需要了解:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align:justify; text-justify:inter-ideograph;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="整段缩进">2.3 整段缩进</h3>
<p>有时候想要体现层次感，需要将整段文字缩进。</p>
<p style="padding-left: 2em;">
这是整段缩进2em
</p>
<p style="padding-left: 4em;">
这是整段缩进4em
</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 2em;&quot;</span>&gt;</span>这是整段缩进2em<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 4em;&quot;</span>&gt;</span>这是整段缩进4em<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="图片居中缩放注释">2.4 图片居中+缩放+注释</h3>
<p><img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg" width="50%" height="50%" title="图片标题."/></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg&quot;</span> <span class="attr">width</span>=<span class="string">50%</span> /&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">2</span>&gt;</span>图片标题<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="图片横向并排">2.5 图片横向并排</h3>
<table>
<tr>
<td>
<a data-fancybox data-caption="Caption"><img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg"/></a>
</td>
<td>
<a data-fancybox data-caption="Caption"><img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg"/></a>
</td>
</tr>
</table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg&quot;</span> <span class="attr">width</span>=<span class="string">50%</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg&quot;</span> <span class="attr">width</span>=<span class="string">50%</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<div data-align="center">
<img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg" width=50%><img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg" width=50%>
</div>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div align&#x3D;&quot;center&quot;&gt;&lt;img src&#x3D;&quot;http:&#x2F;&#x2F;i1.fuimg.com&#x2F;695542&#x2F;42e94e685ed0a68f.jpg&quot; width&#x3D;50%&gt;&lt;img src&#x3D;&quot;http:&#x2F;&#x2F;i1.fuimg.com&#x2F;695542&#x2F;42e94e685ed0a68f.jpg&quot; width&#x3D;50%&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="图片文字">2.6 图片文字</h3>
<p>表格 + HTML 列表</p>
<table>
<tr>
<td>
<ul>
<li>
<b>TASK 1:</b>
</li>
<ul>
<li>
≡ω≡
</li>
<li>
≡ω≡
</li>
</ul>
<li>
<b>TASK 2:</b>
</li>
<ul>
<li>
≡ω≡
</li>
<li>
≡ω≡
</li>
</ul>
</td>
<td>
<div align="center">
<img data-src="http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg" width=50%>
</td>
<pre><code>&lt;/tr&gt;</code></pre>
</table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>TASK 1:<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>≡ω≡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>≡ω≡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>TASK 2:<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>≡ω≡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>≡ω≡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://i1.fuimg.com/695542/42e94e685ed0a68f.jpg&quot;</span> <span class="attr">width</span>=<span class="string">50%</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="html符号">3. HTML符号</h2>
<p>在写笔记的时候有时候总能碰各种符号，有些是数学符号如 ∑ , 有些则是一些奇奇怪怪的符号 🎲。对于前者我们还可以使用行间公式，但对于后者则不得不用 <strong>HTML</strong> 的方式来表示符号。同时在长篇 <strong>.md</strong> 中尽量少使用行间公式能加快渲染速度。</p>
<p>表示方法大致可以分为<strong>Hex Code</strong>、<strong>HTML Code</strong> 和 <strong>HTML Entity</strong> 三种。</p>
<p>如欧元符号: €</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="symbol">&amp;#x20AC;</span> 	Hex Code, 16进制 &quot;&amp;#x&quot; + Hexcode + &quot;;&quot;</span><br><span class="line"><span class="symbol">&amp;#8364;</span>		HTML Code, 10进制 &quot;&amp;#&quot; + HTML Code + &quot;;&quot;</span><br><span class="line">&amp;#euro;		HTML Entity, 名字 &quot;&amp;#&quot; + HTML Entity + &quot;;&quot;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th></th>
<th>€</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Unicode</strong></td>
<td>U+020AC</td>
</tr>
<tr class="even">
<td><strong>Hex Code</strong></td>
<td>20AC</td>
</tr>
<tr class="odd">
<td><strong>HTML Code</strong></td>
<td>8364</td>
</tr>
<tr class="even">
<td><strong>HTML Entity</strong></td>
<td>euro</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="http://xahlee.info/comp/unicode_common_symbols.html">Unicode Common symbols</a></p>
<p><a href="https://www.toptal.com/designers/htmlarrows/">A delightful reference for HTML Symbols</a></p>
<p><a href="http://shapecatcher.com/">手写识别 Unicode 符号</a></p>
</blockquote>
<h2 id="杂项">4. 杂项</h2>
<h3 id="折叠标签">4.1 折叠标签</h3>
<details>
<summary>
折叠标签
</summary>
这是个折叠标题
</details>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>折叠标签<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">    这是个折叠标题</span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="跳转">4.2 跳转</h3>
<blockquote>
<p><a href="https://blog.csdn.net/u013502146/article/details/103171825">Typora页内跳转，真正能用的方法</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Typora使用笔记</category>
      </categories>
      <tags>
        <tag>Typora</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>Typora使用笔记-LaTex篇</title>
    <url>/Typora-LaTeX/</url>
    <content><![CDATA[<h2 id="数学符号">1. 数学符号</h2>
<blockquote>
<p><a href="https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols">List of Latex mathematical symbols</a></p>
</blockquote>
<h2 id="运算公式">2. 运算公式</h2>
<table>
<thead>
<tr class="header">
<th>Symbol</th>
<th>Command</th>
<th>Symbol</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\frac{a}{b}\)</span></td>
<td><code></code></td>
<td><span class="math inline">\(a\cdot b, a\times b\)</span></td>
<td><code>ab, ab</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\sqrt[a]{b}\)</span></td>
<td><code></code></td>
<td><span class="math inline">\(\cancelto&#123;0&#125;&#123;f(x)&#125;\)</span></td>
<td><code></code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\sum_{a}^{b}\)</span></td>
<td><code>_&#123;a&#125;^&#123;b&#125;</code></td>
<td><span class="math inline">\(a,\dot{a},\ddot{a},\vec{a}\)</span></td>
<td><code>a,,,</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\prod_{a}^{b}\)</span></td>
<td><code>_&#123;a&#125;^&#123;b&#125;</code></td>
<td><span class="math inline">\(\int_{a}^{b}{x}\,dx\)</span></td>
<td><code>_&#123;a&#125;^&#123;b&#125;&#123;x&#125;,dx</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\lim_{ {a} \to {\infty}}\)</span></td>
<td><code>_&#123; &#123;a&#125; &#125;</code></td>
<td><span class="math inline">\(\int,\iint,\iiint,\oint\)</span></td>
<td><code>,,,</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>上下标位置 (数学运算符号):</strong> <span class="math display">\[
\int_{a}^{b}\rightarrow\int \limits_{a}^{b}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\int</span><span class="built_in">_</span>&#123;a&#125;<span class="built_in">^</span>&#123;b&#125;  </span><br><span class="line"><span class="keyword">\int</span><span class="keyword">\limits</span><span class="built_in">_</span>&#123;a&#125;<span class="built_in">^</span>&#123;b&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>上下标位置 (普通符号):</strong></p>
<p>先用 转换普通符号为数学符号 <span class="math display">\[
C_{a}^{b}\rightarrow\mathop{C} \limits_{a}^{b}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">C<span class="built_in">_</span>&#123;a&#125;<span class="built_in">^</span>&#123;b&#125;</span><br><span class="line"><span class="keyword">\mathop</span>&#123;C&#125; <span class="keyword">\limits</span><span class="built_in">_</span>&#123;a&#125;<span class="built_in">^</span>&#123;b&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="公式样式">3. 公式样式</h2>
<h3 id="公式内文字公式编号">3.1 公式内文字+公式编号</h3>
<p><span class="math display">\[
y=ax\quad \text{Text} \tag{2}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">y=ax<span class="keyword">\quad</span> <span class="keyword">\text</span>&#123;Text&#125; <span class="keyword">\tag</span>&#123;2&#125;</span><br></pre></td></tr></table></figure>
<h3 id="公式加粗">3.2 公式加粗</h3>
<p><span class="math display">\[
\boldsymbol{f(x)}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\boldsymbol</span>&#123;f(x)&#125;</span><br></pre></td></tr></table></figure>
<p><span class="math display">\[
\mathbf{f(x)}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\mathbf</span>&#123;f(x)&#125;</span><br></pre></td></tr></table></figure>
<h3 id="公式颜色">3.3 公式颜色</h3>
<p><span class="math display">\[
\textcolor{red}{f(x)}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\textcolor</span>&#123;red&#125;&#123;f(x)&#125;</span><br></pre></td></tr></table></figure>
<h3 id="公式大小缩放">3.4 公式大小缩放</h3>
<p><span class="math display">\[
{\tiny  f(x)}\quad{\scriptsize  f(x)}\quad{\small f(x)}\quad{\normalsize f(x)}\quad{\large f(x)}\quad{\Large f(x)}\quad{\LARGE f(x)}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">&#123;<span class="keyword">\tiny</span>  f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\scriptsize</span>  f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\small</span> f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\normalsize</span> f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\large</span> f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\Large</span> f(x)&#125;</span><br><span class="line">&#123;<span class="keyword">\LARGE</span> f(x)&#125;</span><br></pre></td></tr></table></figure>
<h3 id="公式对齐">3.5 公式对齐</h3>
<p><span class="math display">\[
\begin{aligned}
a&amp;=x\\
b&amp;=x^2
\end{aligned}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;aligned&#125;</span><br><span class="line">a<span class="built_in">&amp;</span>=x<span class="keyword">\\</span></span><br><span class="line">b<span class="built_in">&amp;</span>=x<span class="built_in">^</span>2</span><br><span class="line"><span class="keyword">\end</span>&#123;aligned&#125;</span><br></pre></td></tr></table></figure>
<h3 id="公式注释">3.6 公式注释</h3>
<p><span class="math display">\[
f(x)=\underbrace{ax^2+bx}_{=0}+\overbrace{c}^{\text{const}}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">f(x)=<span class="keyword">\underbrace</span>&#123;ax<span class="built_in">^</span>2+bx&#125;<span class="built_in">_</span>&#123;=0&#125;+<span class="keyword">\overbrace</span>&#123;c&#125;<span class="built_in">^</span>&#123;<span class="keyword">\text</span>&#123;const&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="条件成立">3.7 条件成立</h3>
<p><span class="math display">\[
X\stackrel{F}{\longrightarrow}Y
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">X<span class="keyword">\stackrel</span>&#123;F&#125;&#123;<span class="keyword">\longrightarrow</span>&#125;Y</span><br></pre></td></tr></table></figure>
<h2 id="矩阵">4. 矩阵</h2>
<h3 id="普通矩阵">4.1 普通矩阵</h3>
<p><span class="math display">\[
\begin{matrix}
1 &amp; 2\\
4 &amp; 5 
\end{matrix}
\quad
\begin{bmatrix}
1 &amp; 2\\
4 &amp; 5 
\end{bmatrix}
\quad
\begin{Bmatrix}
1 &amp; 2\\
4 &amp; 5 
\end{Bmatrix}
\quad
\begin{pmatrix}
1 &amp; 2\\
4 &amp; 5 
\end{pmatrix}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;matrix&#125;</span><br><span class="line">1 <span class="built_in">&amp;</span> 2 <span class="built_in">&amp;</span> 3<span class="keyword">\\</span></span><br><span class="line">4 <span class="built_in">&amp;</span> 5 <span class="built_in">&amp;</span> 6<span class="keyword">\\</span></span><br><span class="line">7 <span class="built_in">&amp;</span> 8 <span class="built_in">&amp;</span> 9</span><br><span class="line"><span class="keyword">\end</span>&#123;matrix&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;bmatrix&#125;...<span class="keyword">\end</span>&#123;bmatrix&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;Bmatrix&#125;...<span class="keyword">\end</span>&#123;Bmatrix&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;pmatrix&#125;...<span class="keyword">\end</span>&#123;pmatrix&#125;</span><br></pre></td></tr></table></figure>
<h3 id="带省略号的矩阵">4.2 带省略号的矩阵</h3>
<p><span class="math display">\[
\begin{matrix}
 1      &amp; 2      &amp; \cdots &amp; 4      \\
 7      &amp; 6      &amp; \cdots &amp; 5      \\
 \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
 8      &amp; 9      &amp; \cdots &amp; 0      \\
\end{matrix}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;matrix&#125;</span><br><span class="line"> 1      <span class="built_in">&amp;</span> 2      <span class="built_in">&amp;</span> <span class="keyword">\cdots</span> <span class="built_in">&amp;</span> 4      <span class="keyword">\\</span></span><br><span class="line"> 7      <span class="built_in">&amp;</span> 6      <span class="built_in">&amp;</span> <span class="keyword">\cdots</span> <span class="built_in">&amp;</span> 5      <span class="keyword">\\</span></span><br><span class="line"> <span class="keyword">\vdots</span> <span class="built_in">&amp;</span> <span class="keyword">\vdots</span> <span class="built_in">&amp;</span> <span class="keyword">\ddots</span> <span class="built_in">&amp;</span> <span class="keyword">\vdots</span> <span class="keyword">\\</span></span><br><span class="line"> 8      <span class="built_in">&amp;</span> 9      <span class="built_in">&amp;</span> <span class="keyword">\cdots</span> <span class="built_in">&amp;</span> 0      <span class="keyword">\\</span></span><br><span class="line"><span class="keyword">\end</span>&#123;matrix&#125;</span><br></pre></td></tr></table></figure>
<h3 id="增广矩阵">4.3 增广矩阵</h3>
<p><span class="math display">\[
\left[
    \begin{array}{cc|c}
      1 &amp; 2 &amp; 3 \\
      4 &amp; 5 &amp; 6
    \end{array}
\right]
\quad
\begin{bmatrix}
    1 &amp; 2 \\
    3 &amp; 4 \\\hline
    5 &amp; 6
\end{bmatrix}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\left</span>[</span><br><span class="line">    <span class="keyword">\begin</span>&#123;array&#125;&#123;cc|c&#125;</span><br><span class="line">      1 <span class="built_in">&amp;</span> 2 <span class="built_in">&amp;</span> 3 <span class="keyword">\\</span></span><br><span class="line">      4 <span class="built_in">&amp;</span> 5 <span class="built_in">&amp;</span> 6</span><br><span class="line">    <span class="keyword">\end</span>&#123;array&#125;</span><br><span class="line"><span class="keyword">\right</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;bmatrix&#125;</span><br><span class="line">	1 <span class="built_in">&amp;</span> 2 <span class="keyword">\\</span></span><br><span class="line">	3 <span class="built_in">&amp;</span> 4 <span class="keyword">\\</span><span class="keyword">\hline</span></span><br><span class="line">	5 <span class="built_in">&amp;</span> 6</span><br><span class="line"><span class="keyword">\end</span>&#123;bmatrix&#125;</span><br></pre></td></tr></table></figure>
<h3 id="大括号">4.4 大括号</h3>
<p><span class="math display">\[
\left\{ 
\begin{array}\\
a\\
b\\
c
\end{array}
\right.
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\left</span><span class="keyword">\&#123;</span> </span><br><span class="line"><span class="keyword">\begin</span>&#123;array&#125;<span class="keyword">\\</span></span><br><span class="line">a<span class="keyword">\\</span> b<span class="keyword">\\</span> c</span><br><span class="line"><span class="keyword">\end</span>&#123;array&#125;</span><br><span class="line"><span class="keyword">\right</span>.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Typora使用笔记</category>
      </categories>
      <tags>
        <tag>Typora</tag>
        <tag>LaTeX</tag>
      </tags>
  </entry>
  <entry>
    <title>Typora使用笔记-记笔记篇</title>
    <url>/Typora-Note/</url>
    <content><![CDATA[<h2 id="前言">0. 前言</h2>
<p>疫情期间，全部是网课，因此使用 <strong>Typora</strong> 记笔记。相比纸质笔记，便于整理，笔迹也比较易于辨认。但是笔记速度相对与手写还是慢了不少。下面介绍几个我在使用 <strong>Typora</strong> 时使用到的增加效率的软件, 和用到的各种网站。</p>
<p>以下介绍的所有软件都是免费的。这篇文章主要只是记录使用到的软件，并不会写出详细的下载配置过程，但会给出配置每个软件的相关文章的链接。</p>
<h2 id="截图软件---snipaste">1. 截图软件 - Snipaste</h2>
<p>截图软件有很多，微软自带的 <strong>Snipping Tool</strong> 和 <strong>Snip &amp; Sketch</strong> 就基本满足日常需求。 但有时候上网课，刚截完一张图，还没抄完，就切到下一个画面了，这时候又要截图，产生连续截图的需求。因此强烈推荐 <strong>Snipaste</strong> 软件。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210122234550.png" style="zoom: 67%;" title="Snipaste"/></p>
<p>这个软件在截图 <strong>Snip</strong> 的基础操作之上还有 <strong>Paste</strong>。如上图，在按 <kbd>F1</kbd> 截图之后可以按 <kbd>F3</kbd> 将截图贴在旁边，并且调整位置、大小和透明度，数量不限。并且，所有的贴图都可以 <kbd>shift</kbd>+ <kbd>F3</kbd> 一键显示和隐藏。同时还有像素级的鼠标移动控制、截图范围控制，满足各种需求。更多功能和下载地址在下面贴出。</p>
<blockquote>
<p><a href="https://zh.snipaste.com/">Snipaste下载地址 - 官网</a></p>
</blockquote>
<h2 id="图片自动上传---picgo">2. 图片自动上传 - PicGo</h2>
<p>如果一直只使用一台设备使用 <strong>Typora</strong>, 记笔记只给自己看， 那图片上传与否并不太重要。但假如多设备记笔记，笔记会上传博客，那将图片上传图床就在所难免。<strong>Typora</strong> 支持 <strong>PicGo</strong> 用以图片上传服务。<kbd>文件</kbd>&gt;<kbd>偏好设置</kbd>&gt;<kbd>图像</kbd> 就能找到。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210123001230.png"  style="zoom:67%;" title="Typora 的 PicGO 支持"/></p>
<p>可选的为 <code>PicGo-Core(command line)</code> 和 <code>PicGo(app)</code>，字面就能理解，前者为命令行运行，后者是可下载、可交互的 <strong>app</strong>。命令行运行设置完之后很方便，仅在插入图片的时候运行，但部署过程较 <strong>app</strong> 复杂一些，还需要 <strong>node.js</strong> 环境，因此我选择的是 <strong>app</strong>。</p>
<blockquote>
<p><a href="https://github.com/Molunerfinn/PicGo">PicGo 的 Github地址</a></p>
<p><a href="https://www.cnblogs.com/xiaowj/p/13934555.html">Typora + PicGo-Core + Github 实现图片上传到Github</a></p>
<p><a href="https://www.jianshu.com/p/a1e2cf01e05f">Typora+PicGo+Github/Gitee搭建免费稳定的图床</a></p>
<p><a href="https://blog.csdn.net/qq754772661/article/details/111385955?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-2&amp;spm=1001.2101.3001.4242">typora+picgo会发生的一些错误以及解决办法 - 克豪</a></p>
</blockquote>
<p>按照上述流程配置之后就能配合截图软件，实现图片自动上传。</p>
<h2 id="公式识别---mathpix-snip">3. 公式识别 - Mathpix Snip</h2>
<p>在记理工科笔记的时候常常会碰到非常复杂的公式，包含大型的矩阵，奇怪的字母，不知道怎么用 <span class="math inline">\(\LaTeX\)</span> 打出的生僻符号。 <span class="math display">\[
\underbrace{
\begin{bmatrix}
\ddot\psi\\
\dot\beta
\end{bmatrix}
}_{\dot{x}}=
\underbrace{
\begin{bmatrix}
-\frac{c_{\alpha,V}\cdot l_V^2+c_{\alpha,H}\cdot l_H^2}{J_z\cdot v} &amp; -\frac{c_{\alpha,V}\cdot l_V-c_{\alpha,H}\cdot l_H}{J_z}\\
-1-\frac{c_{\alpha,V}\cdot l_V-c_{\alpha,H}\cdot l_H}{mv^2} &amp; -\frac{c_{\alpha,V}+c_{\alpha,H}}{mv}
\end{bmatrix}
}_{A}
\underbrace{
\begin{bmatrix}
\dot\psi\\
\beta
\end{bmatrix}
}_{x}+
\underbrace{
\begin{bmatrix}
\frac{c_{\alpha,V}\cdot l_V}{J_z}\\
\frac{c_{\alpha,V}}{mv}
\end{bmatrix}
}_{B}\cdot
\underbrace{\delta}_{u}
\]</span></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\underbrace</span>&#123;</span><br><span class="line"><span class="keyword">\begin</span>&#123;bmatrix&#125;<span class="keyword">\ddot</span><span class="keyword">\psi</span><span class="keyword">\\</span><span class="keyword">\dot</span><span class="keyword">\beta</span><span class="keyword">\end</span>&#123;bmatrix&#125;</span><br><span class="line">&#125;<span class="built_in">_</span>&#123;<span class="keyword">\dot</span>&#123;x&#125;&#125;=</span><br><span class="line"><span class="keyword">\underbrace</span>&#123;</span><br><span class="line"><span class="keyword">\begin</span>&#123;bmatrix&#125;</span><br><span class="line">-<span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>V<span class="built_in">^</span>2+c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,H&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>H<span class="built_in">^</span>2&#125;&#123;J<span class="built_in">_</span>z<span class="keyword">\cdot</span> v&#125; <span class="built_in">&amp;</span> -<span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>V-c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,H&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>H&#125;&#123;J<span class="built_in">_</span>z&#125;<span class="keyword">\\</span></span><br><span class="line">-1-<span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>V-c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,H&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>H&#125;&#123;mv<span class="built_in">^</span>2&#125; <span class="built_in">&amp;</span> -<span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;+c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,H&#125;&#125;&#123;mv&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;bmatrix&#125;</span><br><span class="line">&#125;<span class="built_in">_</span>&#123;A&#125;</span><br><span class="line"><span class="keyword">\underbrace</span>&#123;<span class="keyword">\begin</span>&#123;bmatrix&#125;<span class="keyword">\dot</span><span class="keyword">\psi</span><span class="keyword">\\</span><span class="keyword">\beta</span><span class="keyword">\end</span>&#123;bmatrix&#125;</span><br><span class="line">&#125;<span class="built_in">_</span>&#123;x&#125;+</span><br><span class="line"><span class="keyword">\underbrace</span>&#123;</span><br><span class="line"><span class="keyword">\begin</span>&#123;bmatrix&#125;<span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;<span class="keyword">\cdot</span> l<span class="built_in">_</span>V&#125;&#123;J<span class="built_in">_</span>z&#125;<span class="keyword">\\</span><span class="keyword">\frac</span>&#123;c<span class="built_in">_</span>&#123;<span class="keyword">\alpha</span>,V&#125;&#125;&#123;mv&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;bmatrix&#125;</span><br><span class="line">&#125;<span class="built_in">_</span>&#123;B&#125;<span class="keyword">\cdot</span><span class="keyword">\underbrace</span>&#123;<span class="keyword">\delta</span>&#125;<span class="built_in">_</span>&#123;u&#125;</span><br></pre></td></tr></table></figure>
<p>这公式，用 <span class="math inline">\(LaTeX\)</span> 打完估计脸都得绿了 (当时年轻的我就是手打的 (°ー°〃) )。这个时候就不得不介绍 <strong>Mathpix Snip</strong> 软件。截图自动 <strong>OCR</strong> 识别公式，并生成相应的 <span class="math inline">\(\LaTeX\)</span> 代码，大大节省时间 (当老师的笔记比较清楚的时候)。</p>
<blockquote>
<p><a href="https://mathpix.com/">Mathpix Snip 官网</a></p>
</blockquote>
<p><strong>Mathpix Snip</strong> 支持全平台使用，但有个问题，免费用量每月仅50条，一下就用完。<strong>Pro</strong> 版本则每月 <strong>$4.99</strong> ，对我们学生党来说稍贵。但其实有免费的方法（当然不是盗版），而是使用 <strong>Mathpix Snip</strong> 提供的 <strong>OCR API</strong>。 这个 <strong>API</strong> 每个月有1000个免费份额，用完之后按个收费（基本上不可能用完），唯一麻烦的是需要绑定信用卡。另外，使用 <strong>Quicker</strong> 软件简化操作过程，方便操作。</p>
<blockquote>
<p><a href="https://space.bilibili.com/62637562">准确识别图片上的数学公式，每个月 1000 次免费使用 - 淳帅二代</a></p>
</blockquote>
<p>参照这个视频即可完成配置，但并没有使用他分享的动作，他的动作需要环境里有 <strong>Python</strong>，而且我用的时候没有成功工作。因此我使用了如下动作。</p>
<blockquote>
<p><a href="https://getquicker.net/sharedaction?code=acf019b8-434e-4979-be62-08d776d80bd7">截图识别公式(mathpix) - linex</a></p>
</blockquote>
<p>实际操作流程如下所示。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210123011150.gif" style="zoom:80%;" title="Mathpix Snip + Quicker 快速识别公式"/></p>
<h2 id="相关网站">4. 相关网站</h2>
<blockquote>
<p><a href="https://www.cnblogs.com/hider/p/11614688.html">Typora入门：全网最全教程 - Hider1214</a>: 简单认识 <strong>Typora</strong> 的 <strong>Markdown</strong> 写法。</p>
<p><a href="https://www.cnblogs.com/hider/p/11614688.html">HTML Support in Typora - Typora 官网</a>: 简单认识 <strong>Typora</strong> 的 <strong>HTML</strong> 支持。</p>
<p><a href="https://htmlcolorcodes.com/zh/yanse-ming/">HTML 常用颜色</a>: 140种已命名的颜色，包含 <strong>Hex</strong> 代码或 <strong>RGB</strong> 值</p>
<p><a href="%5BHTML%20常用颜色%5D(https://htmlcolorcodes.com/zh/yanse-ming/)">Unicode 大全</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Typora使用笔记</category>
      </categories>
      <tags>
        <tag>Typora</tag>
        <tag>LaTeX</tag>
      </tags>
  </entry>
  <entry>
    <title>Typora使用笔记-主题篇</title>
    <url>/Typora-Theme/</url>
    <content><![CDATA[<h2 id="前言">0. 前言</h2>
<p><strong>Typora</strong> 中有各种各样的主题样式，可以满足各式需求。但同时也可以通过修改<strong>CSS</strong> 文件进行个性化微调。熟悉前端的同学可能如鱼得水，但是对此一窍不通的我只能慢慢对比不同主题的 <strong>CSS</strong> 文件，上网搜索，提取想要的特性，自定义主题文件。难免错漏，但起码能用。做个记录。</p>
<p>主题修改基于<strong>Newsprint</strong>。<strong>CSS</strong> 文件通过 <kbd>文件</kbd>&gt;<kbd>偏好设置</kbd>&gt;<kbd>外观</kbd>&gt;<kbd>打开主题文件</kbd> 找到。</p>
<h2 id="表格抬头大小写">1. 表格抬头大小写</h2>
<p><strong>Newsprint</strong> 主题的表格抬头默认全大写，看起来有些不友好。</p>
<p><strong>newsprint.css</strong> 中第222行：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">tfoot</span> <span class="selector-tag">th</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: .<span class="number">25em</span> .<span class="number">25em</span> .<span class="number">25em</span> .<span class="number">4em</span>;</span><br><span class="line">	<span class="attribute">text-transform</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>text-transform:</p>
<table>
<thead>
<tr class="header">
<th>值</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>none</td>
<td>默认。定义带有小写字母和大写字母的标准的文本。</td>
</tr>
<tr class="even">
<td>capitalize</td>
<td>文本中的每个单词以大写字母开头。</td>
</tr>
<tr class="odd">
<td>uppercase</td>
<td>定义仅有大写字母。</td>
</tr>
<tr class="even">
<td>lowercase</td>
<td>定义无大写字母，仅有小写字母。</td>
</tr>
<tr class="odd">
<td>inherit</td>
<td>规定应该从父元素继承 text-transform 属性的值。</td>
</tr>
</tbody>
</table>
</blockquote>
<h2 id="导出pdf时-按标题等级分页">2. 导出PDF时, 按标题等级分页</h2>
<h3 id="自动分页">2.1 自动分页</h3>
<p>在导出时，将在每个<code>h1</code>元素（第一个元素除外）之前创建一个新页面。<strong>newsprint.css</strong> 中加入:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">page-break-before</span>: always;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*以下内容可以保持第一个h1标题前不创建新页面*/</span></span><br><span class="line">  <span class="selector-tag">h1</span><span class="selector-pseudo">:first-of-type</span> &#123;</span><br><span class="line">    <span class="attribute">page-break-before</span>: avoid;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以<code>h2</code>元素为分页标准</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">page-break-before</span>: always;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="强制分页">2.2 强制分页</h3>
<p>在正文中插入要分页的位置</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;page-break-after: always;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="列表符号">3. 列表符号</h2>
<p>在 <strong>Newsprint</strong> 主题中，列表抬头样式皆为圆点</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210120115422.png"   /></p>
<p>在 <strong>newsprint.css</strong> 中找到以下内容（93行），用 <code>/* */</code> 注释掉，</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">	<span class="attribute">list-style-type</span>: decimal;</span><br><span class="line">	<span class="attribute">list-style-position</span>: outside;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">	<span class="attribute">list-style-type</span>: disc;</span><br><span class="line">	<span class="attribute">list-style-position</span>: outside;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span>,</span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">	<span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加以下内容（取自 <strong>Github</strong> 主题）</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.task-list</span>&#123;</span><br><span class="line">	<span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &#123;</span><br><span class="line">	<span class="attribute">padding-left</span>:<span class="number">34px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">1.25rem</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">1.25rem</span>;</span><br><span class="line">	<span class="attribute">display</span>: block;</span><br><span class="line">	<span class="attribute">-webkit-appearance</span>: initial;</span><br><span class="line">	<span class="attribute">top</span>: -<span class="number">0.2rem</span>;</span><br><span class="line">	<span class="attribute">margin-left</span>: -<span class="number">1.6em</span>;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">1rem</span> - <span class="number">7px</span>);</span><br><span class="line">	<span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">	<span class="attribute">outline</span>: none;</span><br><span class="line">	<span class="attribute">box-shadow</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">1.5rem</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">1.5rem</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">1.5rem</span>;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	<span class="attribute">transition</span>: background-color <span class="number">200ms</span> ease-in-out;</span><br><span class="line">	<span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-attr">[checked]</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">	<span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">	<span class="attribute">display</span>:inline-block;</span><br><span class="line">	<span class="attribute">transition</span>: background-color <span class="number">200ms</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-attr">[checked]</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-task-list-item</span> &gt; <span class="selector-tag">input</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">	<span class="attribute">-webkit-transition</span>: opacity <span class="number">0.05s</span> ease-in-out;</span><br><span class="line">	<span class="attribute">-moz-transition</span>: opacity <span class="number">0.05s</span> ease-in-out;</span><br><span class="line">	<span class="attribute">transition</span>: opacity <span class="number">0.05s</span> ease-in-out;</span><br><span class="line">	<span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">	<span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">	<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0.4375rem</span>;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">0.28125rem</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">0.9375rem</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">0.5rem</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">3px</span> solid <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">border-top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">border-right</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后列表样式如下所示</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210122001140.png"   /></p>
<h2 id="两端对齐">4. 两端对齐</h2>
<p>在 <strong>newsprint.css</strong> 中找到以下内容（62行）：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#f3f2ee</span>;</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">&quot;PT Serif&quot;</span>, <span class="string">&#x27;Times New Roman&#x27;</span>, Times, serif;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#1f0909</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加 <code>text-align: justify;</code>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#f3f2ee</span>;</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">&quot;PT Serif&quot;</span>, <span class="string">&#x27;Times New Roman&#x27;</span>, Times, serif;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#1f0909</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">1.5em</span>;</span><br><span class="line">	<span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>text-align:</p>
<table>
<thead>
<tr class="header">
<th>值</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>left</td>
<td>把文本排列到左边。默认值：由浏览器决定。</td>
</tr>
<tr class="even">
<td>right</td>
<td>把文本排列到右边。</td>
</tr>
<tr class="odd">
<td>center</td>
<td>把文本排列到中间。</td>
</tr>
<tr class="even">
<td>justify</td>
<td>实现两端对齐文本效果。</td>
</tr>
<tr class="odd">
<td>inherit</td>
<td>规定应该从父元素继承 text-align 属性的值。</td>
</tr>
</tbody>
</table>
</blockquote>
]]></content>
      <categories>
        <category>Typora使用笔记</category>
      </categories>
      <tags>
        <tag>Typora</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>简单车辆模型-纵向动力学</title>
    <url>/Modeling-and-simulation-in-vehicle-technology-Laengsdynamik/</url>
    <content><![CDATA[<h2 id="纵向动力学">0. 纵向动力学</h2>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214174037.png" style="zoom:80%;" /></p>
<p>一个简单的平面纵向动力学模型如下所示</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214174145.png"  style="zoom: 50%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 我们正在寻找在水平道路上以速度 <i>v<sub>0</sub></i> 行驶的车辆的制动距离。 滚动阻力可以忽略。 产生的制动扭矩 <i>M<sub>B</sub></i> 分别为：1500 <i>Nm</i>, 1700 <i>Nm</i>, 2000 <i>Nm</i>
</p>
<p><strong>给定参数</strong></p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>数值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><i><b>v<sub>0</sub></b></i></td>
<td>100 [<i>km/h</i>]</td>
<td>车辆初始速度</td>
</tr>
<tr class="even">
<td><i><b>g</b></i></td>
<td>9.81 [<i>m/s<sup>2</sup></i>]</td>
<td>重力加速度</td>
</tr>
<tr class="odd">
<td><i><b>m</b></i></td>
<td>1500 [<i>kg</i>]</td>
<td>车辆质量</td>
</tr>
<tr class="even">
<td><i><b>J</b></i></td>
<td>1.6 [<i>kg/m<sup>2</sup></i>]</td>
<td>转动惯量</td>
</tr>
<tr class="odd">
<td><i><b>F<sub>z</sub></b></i></td>
<td>0.5·<i>m</i>·<i>g</i></td>
<td>车轮负载</td>
</tr>
<tr class="even">
<td><i><b>r<sub>Rad</sub></b></i></td>
<td>0.3 [<i>m</i>]</td>
<td>车轮半径</td>
</tr>
<tr class="odd">
<td><i><b>ρ<sub>L</sub></b></i></td>
<td>1.2 [<i>kg/m<sup>3</sup></i>]</td>
<td>空气密度</td>
</tr>
<tr class="even">
<td><i><b>c<sub>w</sub></b></i></td>
<td>0.3</td>
<td>空气阻力系数</td>
</tr>
<tr class="odd">
<td><i><b>A</b></i></td>
<td>2 [<i>m</i>]</td>
<td>车辆迎风面积</td>
</tr>
<tr class="even">
<td><i><b>a</b></i></td>
<td>0.86</td>
<td>摩擦系数参数</td>
</tr>
<tr class="odd">
<td><i><b>b</b></i></td>
<td>33.82</td>
<td>摩擦系数参数</td>
</tr>
<tr class="even">
<td><i><b>c</b></i></td>
<td>0.36</td>
<td>摩擦系数参数</td>
</tr>
</tbody>
</table>
<p>车辆的运动方程 <span class="math display">\[
\begin{eqnarray*}
m \cdot \ddot{x}&amp;=&amp;-F_{L}-F_{x, v}-F_{x, h}\tag{1} \\ 
J \cdot \ddot{\varphi}_{v}&amp;=&amp;M+F_{x, v} \cdot r_{R a d}\tag{2} \\ 
J \cdot \ddot{\varphi}_{h}&amp;=&amp;M+F_{x, h} \cdot r_{R a d}\tag{3}
\end{eqnarray*}
\]</span></p>
<table>
<thead>
<tr class="header">
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><b><i>F<sub>L</sub></i></b></td>
<td>空气阻力</td>
</tr>
<tr class="even">
<td><b><i>F<sub>G</sub></i></b></td>
<td>重力</td>
</tr>
<tr class="odd">
<td><b><i>M</i></b></td>
<td>驱动/制动力矩</td>
</tr>
<tr class="even">
<td><b><i>F<sub>z</sub></i></b></td>
<td>轮毂法向力</td>
</tr>
<tr class="odd">
<td><b><i>F<sub>x</sub></i></b></td>
<td>摩擦力 (转动摩擦力，车轮滑移)</td>
</tr>
</tbody>
</table>
<p>忽略由于制动而改变车轴负载: <span class="math display">\[
F_{z, v}=F_{z, h}=F_{z} ;\quad F_{x, v}=F_{x, h}=F_{x} ;\quad  \varphi_{v}=\varphi_{h}=\varphi
\]</span> 因此，(1) 可用 (4) 表示，(2)，(3) 可用 (5) 表示， <span class="math display">\[
\begin{eqnarray*}
m \cdot \ddot{x}&amp;=&amp;-F_{L}-2F_{x}\tag{4} \\ 
J \cdot \ddot{\varphi}&amp;=&amp;M+F_{x} \cdot r_{R a d}\tag{5}
\end{eqnarray*}
\]</span> 式 (4) 中空气阻力 <i><b>F<sub>L</sub></b></i>，摩擦力 <i><b>F<sub>x</sub></b></i> 如式 (6) - (7): <span class="math display">\[
\begin{eqnarray*}
F_{L}&amp;=&amp;\frac{\rho_{L}}{2} A c_{w} \dot{x}^{2}\tag{6} \\ 
\left|F_{x}\right|&amp;=&amp;\left|\mu * F_{z}\right|\tag{7}
\end{eqnarray*}
\]</span> 式 (7) 中的摩擦系数 <b><i>μ</i></b> 并不是固定系数，而是会随着轮毂的滑移率 <b><i>s</i></b> 变化。</p>
<p><font size=4><b>滑移率</b></font></p>
<p>下图为轮毂在不同情况下滑移率 <b><i>s</i></b> 与车轮速度 <b><i>ωR</i></b> 和车身速度 <b><i>v</i></b> 的关系</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214201159.png" title="轮毂在不同情况下的滑移率" style="zoom: 67%;" /></p>
<p>借助这个模型，主要研究刹车时的情况，因此滑移率式为: <span class="math display">\[
s=\frac{\dot{x}-\dot{\varphi} r_{R a d}}{\dot{x}}\tag{8}
\]</span> 同时，摩擦系数 <b><i>μ</i></b> 也随滑移率 <b><i>s</i></b> 变化。下图描述了不同路况的摩擦系数型曲线。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214201521.gif" title="不同路面条件下摩擦系数随滑移率变化曲线" style="zoom:80%;" /></p>
<p>上图的曲线可用式 (9) 描述, 其中 <b><i>a, b, c</i></b> 为路面相关系数: <span class="math display">\[
\mu(s)=a \cdot\left(1-e^{-b s}\right)-c s\tag{9}
\]</span> 因此，式子 (7) 用符号函数 <b><i>sign</i></b> 去掉绝对值符号: <span class="math display">\[
F_{x}=\mu \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} r_{R a d}\right)\tag{10}
\]</span> 同理 (5) 中力矩 <b><i>M</i></b> 用刹车力矩表示也可用到符号函数 <b><i>sign</i></b>: <span class="math display">\[
M=M_{B} \cdot \operatorname{sign}(\dot{\varphi})\tag{11}
\]</span> 因此，最终运动方程可用 (12) - (14) 表示: <span class="math display">\[
\begin{eqnarray*}
m \cdot \ddot{x}&amp;=&amp;-\frac{\rho_{L}}{2} A c_{w} \dot{x}^{2}-2 \cdot \mu(s) \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} r_{R a d}\right)\tag{12}\\
J \cdot \ddot{\varphi}&amp;=&amp;-M_{B} \cdot \operatorname{sign}(\dot{\varphi})+\mu(s) \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} r_{R a d}\right) \cdot r_{R a d}\tag{13}\\
\mu(s)&amp;=&amp;a \cdot\left(1-e^{-b s}\right)-c s\tag{9}
\end{eqnarray*}
\]</span></p>
<h2 id="基础知识">1. 基础知识</h2>
<h3 id="符号函数-sign">1.1 符号函数 <b><i>sign</i></b></h3>
<p>符号函数（Sign function，简称sgn）是一个逻辑函数，用以判断实数的正负号。其定义为<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>： <span class="math display">\[
\operatorname{sign} x=\left\{\begin{array}{ccc}-1 &amp; : &amp; x&lt;0 \\ 0 &amp; : &amp; x=0 \\ 1 &amp; : &amp; x&gt;0\end{array}\right.
\]</span> <img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214230350.png" style="zoom:70%;" /></p>
<p>但这个函数为阶跃函数，会导致不连续性。因此，在编写代码时可用 <b><i>arctan</i></b> 函数 "软化" 边缘。通过式 (14) 来拟合。 <span class="math display">\[
y = \frac{2}{\pi}\cdot\operatorname{atan}(\frac{\pi}{2}\cdot 1000\cdot x)\tag{14}
\]</span> <img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210214205242.png" style="zoom:67%;" /></p>
<p>MATLAB 函数如下</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[y]</span> = <span class="title">nsign</span><span class="params">(x)</span></span></span><br><span class="line">	y = <span class="number">2</span>/<span class="built_in">pi</span>*<span class="built_in">atan</span>(<span class="built_in">pi</span>/<span class="number">2</span>*<span class="number">1000</span>*x);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="偏微分方程降阶">1.2 偏微分方程降阶</h3>
<p>本问题的偏微分方程: <span class="math display">\[
\begin{eqnarray*}
m \cdot \ddot{x}&amp;=&amp;-\frac{\rho_{L}}{2} A c_{w} \dot{x}^{2}-2 \cdot \mu(s) \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} r_{R a d}\right)\tag{12}\\
J \cdot \ddot{\varphi}&amp;=&amp;-M_{B} \cdot \operatorname{sign}(\dot{\varphi})+\mu(s) \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} r_{R a d}\right) \cdot r_{R a d}\tag{13}\\
\end{eqnarray*}
\]</span> 降阶的思路是将偏微分方程转为状态空间，用状态向量 <span class="math inline">\(\underline{\xi}=\left[\begin{array}{l}\underline{x} \\ \dot{\underline{x}}\end{array}\right]\)</span> 表示。</p>
<ol type="1">
<li><p>将 (12), (13) 用显式 <span class="math inline">\(\underline{\ddot{x}}= ...\)</span> 表示: <span class="math display">\[
\begin{eqnarray*}
\ddot{x}&amp;=&amp;-\frac{\rho_{L}}{2 m} A c_{w} \dot{x}^{2}-2 \cdot \frac{\mu(S)}{m} \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} \cdot r_{R a d}\right)\tag{14} \\ 
\ddot{\varphi}&amp;=&amp;-\frac{M_{B}}{J} \cdot \operatorname{sign}(\dot{\varphi})+\frac{\mu(S)}{J} \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} \cdot r_{R a d}\right) \cdot r_{R a d}\tag{15}
\end{eqnarray*}
\]</span></p></li>
<li><p>建立方程组 <span class="math display">\[
\begin{array}{l}\dot{x}=\dot{x} \\ \dot{\varphi}=\dot{\varphi} \\ \ddot{x}=-\frac{\rho_{L}}{2 m} A c_{w} \dot{x}^{2}-2 \cdot \frac{\mu(S)}{m} \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} \cdot r_{R a d}\right) \\ \ddot{\varphi}=-\frac{M_{B}}{J} \cdot \operatorname{sign}(\dot{\varphi})+\frac{\mu(S)}{J} \cdot F_{z} \cdot \operatorname{sign}\left(\dot{x}-\dot{\varphi} \cdot r_{R a d}\right) \cdot r_{R a d}\end{array}
\]</span></p></li>
<li><p>设置状态向量 <span class="math display">\[
\underline{x}=\left[\begin{array}{l}x \\ \varphi\end{array}\right]
\]</span> 因此: <span class="math display">\[
\underline{\xi}=\left[\begin{array}{c}\xi_{1} \\ \xi_{2} \\ \xi_{3} \\ \xi_{4}\end{array}\right]=\left[\begin{array}{c}x \\ \varphi \\ \dot{x} \\ \dot{\varphi}\end{array}\right] ;\qquad \underline{\dot{\xi}}=\left[\begin{array}{c}\dot{\xi}_{1} \\ \dot{\xi}_{2} \\ \dot{\xi}_{3} \\ \dot{\xi}_{4}\end{array}\right]=\left[\begin{array}{c}\dot{x} \\ \dot{\varphi} \\ \ddot{x} \\ \ddot{\varphi}\end{array}\right]
\]</span></p></li>
<li><p>将左侧 <span class="math inline">\(\underline{\dot{\xi}}\)</span> 和右侧 <span class="math inline">\(\underline{ {\xi}}\)</span> 联系起来 <span class="math display">\[
\dot{\xi}=\left\{\begin{array}{l}\dot{\xi}_{1}=\dot{x}=\dot{x}=\xi_{3} \\ \dot{\xi}_{2}=\dot{\varphi}=\dot{\varphi}=\xi_{4} \\ \dot{\xi}_{3}=\ddot{x}=\frac{1}{m}\left(-\frac{\rho_{L}}{2} A c_{w} \xi_{3}^{2}-2 \cdot \mu(S) \cdot F_{z} \cdot \operatorname{sign}\left(\xi_{3}-\xi_{4} \cdot r_{R a d}\right)\right) \\ \dot{\xi}_{4}=\ddot{\varphi}=\frac{1}{J}\left(-M_{B} \cdot \operatorname{sign}\left(\xi_{4}\right)+\mu(S) \cdot F_{z} \cdot \operatorname{sign}\left(\xi_{3}-\xi_{4} \cdot r_{R a d}\right) \cdot r_{R a d}\right)\end{array}\right.
\]</span></p></li>
</ol>
<h3 id="matlab-解偏微分方程">1.3 MATLAB 解偏微分方程</h3>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210209172634.png" title="解偏微分方程的MATLAB函数" style="zoom:80%;" /></p>
<p><strong>solver</strong> 的可用函数如下</p>
<table>
<thead>
<tr class="header">
<th>Solvername</th>
<th>选择领域</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ode23</td>
<td>解非刚性微分方程，低精度，使用Runge-Kutta法的二三阶算法。</td>
</tr>
<tr class="even">
<td>ode45</td>
<td>解非刚性微分方程，中等精度，使用Runge-Kutta法的四五阶算法。</td>
</tr>
<tr class="odd">
<td>ode113</td>
<td>解非刚性微分方程，变精度变阶次Adams-Bashforth-Moulton PECE算法。</td>
</tr>
<tr class="even">
<td>ode23t</td>
<td>解中等刚性微分方程，使用自由内插法的梯形法则。</td>
</tr>
<tr class="odd">
<td>ode15s</td>
<td>解刚性微分方程，使用可变阶次的数值微分（NDFs）算法。</td>
</tr>
<tr class="even">
<td>ode23s</td>
<td>解刚性微分方程，低阶方法，使用修正的Rosenbrock公式。</td>
</tr>
<tr class="odd">
<td>ode23tb</td>
<td>解刚性微分方程，低阶方法，使用TR-BDF2方法，即Runger-Kutta公式的第一级采用梯形法则，第二级采用Gear法。</td>
</tr>
</tbody>
</table>
<p><strong><span class="citation" data-cites="odefunction">@odefunction</span></strong> 中描述状态向量 <span class="math inline">\(\underline{\dot\xi}\)</span> 和 <span class="math inline">\(\underline\xi\)</span> 的关系。在这里必须将大于一阶的偏微分方程转换为一阶的偏微分方程，通过 1.2 中的方法降阶。</p>
<p><strong>odeopts</strong> 优化 <strong>solver</strong> 的解偏微分方程过程。</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">options = odeset(<span class="string">&#x27;name1&#x27;</span>,value1,<span class="string">&#x27;name2&#x27;</span>,value2,...)</span><br></pre></td></tr></table></figure>
<p><strong>odeopts</strong> 提供了多个选项，具体参考 <a href="https://de.mathworks.com/help/matlab/ref/odeset.html">odeopts 的 Help Center</a>，下面介绍几个常用的选项:</p>
<ul>
<li><p><strong>误差控制</strong> (Fehlerkontrolle)</p>
<ul>
<li><font color='DarkViolet'>'RelTol'</font> : 相对误差界限，它控制所有解决方案中的正确位数，但小于 <font color='DarkViolet'>'AbsTol'</font>。在每个步骤中，ODE求解器都会估计解决方案的第i个部分中的局部误差 e。</li>
<li><font color='DarkViolet'>'AbsTol'</font> : 绝对误差，该值是一个阈值。</li>
<li><font color='DarkViolet'>'NormControl'</font> : 有 on 和 off 两个状态，当NormControl处于 on 状态时，求解器将使用解决方案的范式而非绝对值来控制误差e的每一步：</li>
</ul>
<p><span class="math display">\[
|e(i)| \leqslant \max(RelTol\cdot abs(y(i)),\,AbsTol(i))
\]</span></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215140539.png" style="zoom:67%;" /></p></li>
<li><p><strong>步长控制</strong> (Schrittweitenkontrolle)</p>
<ul>
<li><p><font color='DarkViolet'>'InitialStep'</font> : 初始步长，有关第一次积分步长的建议 (可能受到tspan 影响)</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215140859.png"  style="zoom:50%;" /></p></li>
<li><p><font color='DarkViolet'>'MaxStep'</font> : 积分步骤的步骤大小的最大允许值。MaxStep设置求解器采取的任何步骤的大小的上限。例如，如果方程具有周期性，则将MaxStep设置为周期的一小部分可确保求解器不会将步长扩大得太大，以至于无法跨过感兴趣区域。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215191019.png" style="zoom: 80%;" /></p></li>
</ul></li>
<li><p><strong>解算器输出功能</strong> (Solver Ausgabefunktionen)</p>
<ul>
<li><p><font color='DarkViolet'>'OutputFcn'</font> : 每个成功的时间步之后，ODE求解器都会调用输出函数。 如果调用不带输出的ODE求解器，则输出函数默认为@odeplot，该函数将在计算所有求解分量时将其绘制出来。</p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215193649.png" title="自定义函数打印结果" style="zoom:80%;" /></p></li>
<li><p><font color='DarkViolet'>'OutputSel'</font> : 向量指定要传递给输出函数的解决方案的哪些组成部分。</p></li>
</ul></li>
</ul>
<blockquote>
<p><strong>例子 - 摆</strong></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215194941.png" style="zoom: 80%;" /></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 设置ODE函数参数</span></span><br><span class="line">odeopts = odeset(<span class="string">&#x27;reltol&#x27;</span>,<span class="number">1e-9</span>,<span class="string">&#x27;abstol&#x27;</span>,<span class="number">1e-12</span>);</span><br><span class="line"><span class="comment">% 引入数值解</span></span><br><span class="line">[t2,xi2] = ode45(@ODE_Pendel_nlin,tspan,xi_0,odeopts);</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215195151.png" title="没设置误差(蓝线)，设置误差（红线）" style="zoom: 67%;" /></p>
</blockquote>
<h2 id="matlab-skript">2. MATLAB Skript</h2>
<p style="background-color:Wheat">
<font size=4><b>任务1</b></font>: 我们正在寻找在水平道路上以速度 <i>v<sub>0</sub></i> 行驶的车辆的制动距离。 滚动阻力可以忽略。 产生的制动扭矩 <i>M<sub>B</sub></i> 分别为：1500 <i>Nm</i>, 1700 <i>Nm</i>, 2000 <i>Nm</i>
</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 定义全局向量</span></span><br><span class="line"><span class="keyword">global</span> v0 g m J Fz rR rhoL cw A RSK s_ABS</span><br><span class="line"><span class="comment">% 定义系统参数</span></span><br><span class="line">v0 = <span class="number">100</span>/<span class="number">3.6</span>; <span class="comment">% in m/s</span></span><br><span class="line">g = <span class="number">9.81</span>; <span class="comment">% m/s^2</span></span><br><span class="line">m = <span class="number">1500</span>; <span class="comment">% kg</span></span><br><span class="line">J = <span class="number">1.6</span>; <span class="comment">% kgm^2</span></span><br><span class="line">Fz = <span class="number">0.5</span>*m*g;</span><br><span class="line">rR = <span class="number">0.3</span>; <span class="comment">% m</span></span><br><span class="line">rhoL = <span class="number">1.2</span>; <span class="comment">% kg/m^3</span></span><br><span class="line">cw = <span class="number">0.3</span>; <span class="comment">%-</span></span><br><span class="line">A = <span class="number">2</span>; <span class="comment">% m^2</span></span><br><span class="line"><span class="comment">% 计算 mu(s) 的参数</span></span><br><span class="line">a = <span class="number">0.86</span>;</span><br><span class="line">b = <span class="number">33.82</span>;</span><br><span class="line">c = <span class="number">0.36</span>;</span><br><span class="line"><span class="comment">% mu = a*(1-exp(-b*s))-c*s;</span></span><br><span class="line">RSK = @(s)a*(<span class="number">1</span>-<span class="built_in">exp</span>(-b*s))-c*s;</span><br><span class="line"><span class="comment">% 制动力矩</span></span><br><span class="line">MB = [<span class="number">1500</span> <span class="number">1700</span> <span class="number">2000</span>]; <span class="comment">% Nm</span></span><br><span class="line"><span class="comment">% ABS的滑移极限值</span></span><br><span class="line">s_ABS = <span class="number">0.14</span>;</span><br><span class="line"><span class="comment">% 创建时间向量</span></span><br><span class="line">tspan = <span class="number">0</span>:<span class="number">0.01</span>:<span class="number">10</span>; <span class="comment">% s</span></span><br><span class="line"><span class="comment">% 创建系统初始值 [x, phi, xp, phip]</span></span><br><span class="line">xi0 = [<span class="number">0</span>, <span class="number">0</span>, v0, v0/rR];</span><br></pre></td></tr></table></figure>
<p><strong>计算无ABS时的情况</strong></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">[t1,xi1] = ode15s(@ODE_Bremsen,tspan,xi0,[],MB(<span class="number">1</span>),<span class="built_in">false</span>);</span><br><span class="line">[t2,xi2] = ode15s(@ODE_Bremsen,tspan,xi0,[],MB(<span class="number">2</span>),<span class="number">0</span>);</span><br><span class="line">[t3,xi3] = ode15s(@ODE_Bremsen,tspan,xi0,[],MB(<span class="number">3</span>),<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>函数定义:</strong></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% ODE-函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[xip]</span> = <span class="title">ODE_Bremsen</span><span class="params">(t,xi,MB,ABS)</span></span></span><br><span class="line">	<span class="comment">% 导入全局变量</span></span><br><span class="line">	<span class="keyword">global</span> v0 g m J Fz rR rhoL cw A RSK s_ABS</span><br><span class="line">	<span class="comment">% 分配 xip</span></span><br><span class="line">	xip = <span class="built_in">zeros</span>(<span class="number">4</span>,<span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">% 车轮转速最小为零，不为负数</span></span><br><span class="line">	xi(<span class="number">4</span>) = <span class="built_in">max</span>(<span class="number">0</span>, xi(<span class="number">4</span>))</span><br><span class="line">	</span><br><span class="line">	<span class="comment">% 计算滑移率</span></span><br><span class="line">	<span class="keyword">if</span> xi(<span class="number">3</span>)&lt;<span class="number">0.0000001</span></span><br><span class="line">		s = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		s = (xi(<span class="number">3</span>)-xi(<span class="number">4</span>)*rR)/xi(<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">% 计算摩擦系数 mu</span></span><br><span class="line">	mu = RSK(s);</span><br><span class="line"></span><br><span class="line">	<span class="comment">% ABS作为单点控制实施</span></span><br><span class="line">	<span class="keyword">if</span> ABS</span><br><span class="line">		MB = (nsign(s_ABS-s)+<span class="number">1</span>)/<span class="number">2</span>*MB;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">% 力的计算</span></span><br><span class="line">	Fl = rhoL/<span class="number">2</span>*A*cw*xi(<span class="number">3</span>)^<span class="number">2</span>;</span><br><span class="line">	Fx = mu*Fz*nsign(xi(<span class="number">3</span>)-xi(<span class="number">4</span>)*rR);</span><br><span class="line"></span><br><span class="line">	<span class="comment">% ODE系统的显性方式</span></span><br><span class="line">	xip(<span class="number">1</span>) = xi(<span class="number">3</span>);</span><br><span class="line">	xip(<span class="number">2</span>) = xi(<span class="number">4</span>);</span><br><span class="line">	xip(<span class="number">3</span>) = (<span class="number">1</span>/m)*(-Fl<span class="number">-2</span>*Fx);</span><br><span class="line">	xip(<span class="number">4</span>) = (<span class="number">1</span>/J)*(-MB*nsign(xi(<span class="number">4</span>))+Fx*rR);</span><br><span class="line">	</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>定义用actan近似Sign函数</strong></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 用 arctan 近似 sign</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[out]</span> = <span class="title">nsign</span><span class="params">(inp)</span></span></span><br><span class="line">	out = <span class="number">2</span>/<span class="built_in">pi</span>*<span class="built_in">atan</span>(<span class="built_in">pi</span>/<span class="number">2</span>*<span class="number">1000</span>*inp);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215200008.jpg" style="zoom:67%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210215200013.jpg" style="zoom: 67%;" /></p>
<p style="background-color:Wheat">
<font size=4><b>任务2</b></font>: 纵向动态模型可以扩展为包括简单的防抱死制动系统 (ABS)。 该控制器应设计为单点控制器，该控制器可以在 s = 0.14 处断开外部制动扭矩。 使用反正切函数可以避免此处的不连续性。
</p>
<p><strong>计算有ABS时的情况</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[t1a,xi1a] &#x3D; ode15s(@ODE_Bremsen,tspan,xi0,[],MB(1),true);</span><br><span class="line">[t2a,xi2a] &#x3D; ode15s(@ODE_Bremsen,tspan,xi0,[],MB(2),1);</span><br><span class="line">[t3a,xi3a] &#x3D; ode15s(@ODE_Bremsen,tspan,xi0,[],MB(3),1);</span><br></pre></td></tr></table></figure>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210216123012.jpg" style="zoom:67%;" /></p>
<p><img data-src="https://raw.githubusercontent.com/Mr-Maohaha/cloudimg/master/data/20210216123020.jpg" style="zoom:67%;" /></p>
<p>可用看到，在具备ABS系统的刹车系统中在减少制动距离的同时减少了刹车时间。</p>
<h2 id="参考文献">参考文献</h2>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>WIKIPEDIA, ‘‘符号函数,” 2021<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
]]></content>
      <categories>
        <category>TU-Branschweig</category>
        <category>车辆技术中的建模与仿真</category>
      </categories>
      <tags>
        <tag>Matlab</tag>
        <tag>车辆技术</tag>
        <tag>振动分析</tag>
        <tag>行驶动力学</tag>
      </tags>
  </entry>
</search>
